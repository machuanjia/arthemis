{"version":3,"sources":["views/project/ProjectCollection.tsx","../node_modules/@ant-design/icons-svg/es/asn/SnippetsOutlined.js","../node_modules/@ant-design/icons/es/icons/SnippetsOutlined.js","views/project/index.tsx","apis/scrum.ts","apis/tasks.ts","apis/project.ts","apis/graph.ts","apis/index.ts","components/Mixin/index.tsx"],"names":["ProjectCollecrtionComponent","props","state","loading","e","preventDefault","this","callback","isVisible","isRefresh","values","entity","labelCol","span","wrapperCol","onFinish","handleSubmit","bind","initialValues","name","description","Item","label","rules","required","message","placeholder","rows","type","htmlType","className","i18n","t","onClick","cancel","Component","SnippetsOutlined","ref","React","AntdIcon","Object","assign","icon","SnippetsOutlinedSvg","displayName","UserView","fetchAction","getProjects","getDetailAction","getProjectDetail","createAction","createProject","updateAction","updateProject","deleteAction","deleteProject","record","editEntity","_id","deleteEntity","history","push","data","pagination","getRowKey","columns","title","dataIndex","key","render","text","width","placement","detailAction","EditOutlined","editAction","DeleteOutlined","rowKey","bordered","dataSource","searchAction","isCollectionVisible","openCollection","closeCollection","collectionCallBack","onKeyDown","suffix","SearchOutlined","PlusOutlined","getTable","visible","MODAL_SIZE","md","destroyOnClose","footer","onCancel","listMixin","getProjectScrums","params","request","url","method","createScrum","updateScrum","createTask","updateTask","deleteTask","getTaskDetail","getTasks","sortTasks","summaryTask","getSummary","id","getGraphs","createGraph","getGraphDetail","updateGraph","deleteGraph","ComposedComponent","instance","beforeFetch","afterFtech","searchText","showSizeChanger","onShowSizeChange","onChange","pageChange","pageSizeOptions","hideOnSinglePage","pageIndex","pageSize","total","getList","code","keyCode","value","target","current","page","setState","then","init","pi","ps","keyword","res","err","console","log","error","index","getInstance"],"mappings":"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","file":"static/js/959.e1790150.chunk.js","sourcesContent":["/*\n * @Author: D.Y\n * @Date: 2021-02-04 15:27:20\n * @LastEditTime: 2021-05-06 16:26:36\n * @LastEditors: D.Y\n * @FilePath: /arthemis-client/src/views/project/ProjectCollection.tsx\n * @Description:\n */\nimport React, { Component } from 'react'\nimport { Form, Input, Button } from 'antd'\nimport i18n from 'i18next'\nimport { isPhone } from '@utils/index'\nimport type { IProject } from '@interfaces/project'\nimport TextArea from 'antd/lib/input/TextArea'\n\ntype IProjectCollectionProps = {\n  callback: ({ isVisible, isRefresh, values }) => unknown\n  form: any\n  entity: IProject\n}\ntype IProjectCollectionState = {\n  loading: boolean\n}\n\nexport default class ProjectCollecrtionComponent extends Component<\n  IProjectCollectionProps,\n  IProjectCollectionState\n> {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: false,\n    }\n  }\n  componentDidMount() {\n    // console.log(this.props.entity);\n  }\n  cancel(e) {\n    e.preventDefault()\n    this.props.callback({\n      isVisible: false,\n      isRefresh: false,\n      values: '',\n    })\n  }\n  handleSubmit(values) {\n    this.props.callback({\n      isVisible: false,\n      isRefresh: true,\n      values,\n    })\n  }\n  \n  render() {\n    const { entity } = this.props\n    return (\n      <Form\n        labelCol={{ span: 24 }}\n        wrapperCol={{ span: 24 }}\n        onFinish={this.handleSubmit.bind(this)}\n        initialValues={{\n          name: entity ? entity.name : '',\n          description: entity ? entity.description : '',\n        }}\n      >\n        <Form.Item\n          label=\"用户名\"\n          name=\"name\"\n          rules={[{ required: true, message: '请输入项目名' }]}\n        >\n          <Input placeholder=\"请输入用户名\" />\n        </Form.Item>\n        <Form.Item label=\"描述\" name=\"description\" rules={[{ required: true, message: '请输入描述' }]}>\n          <TextArea rows={4} placeholder=\"请输入描述\"/>\n        </Form.Item>\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" className=\"m-r-12\">\n            {i18n.t('action.save')}\n          </Button>\n          <Button onClick={this.cancel.bind(this)}> {i18n.t('action.cancel')}</Button>\n        </Form.Item>\n      </Form>\n    )\n  }\n}\n","// This icon file is generated automatically.\nvar SnippetsOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M832 112H724V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H500V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H320c-17.7 0-32 14.3-32 32v120h-96c-17.7 0-32 14.3-32 32v632c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32v-96h96c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM664 888H232V336h218v174c0 22.1 17.9 40 40 40h174v338zm0-402H514V336h.2L664 485.8v.2zm128 274h-56V456L544 264H360v-80h68v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h152v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h68v576z\" } }] }, \"name\": \"snippets\", \"theme\": \"outlined\" };\nexport default SnippetsOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport SnippetsOutlinedSvg from \"@ant-design/icons-svg/es/asn/SnippetsOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar SnippetsOutlined = function SnippetsOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: SnippetsOutlinedSvg\n  }));\n};\n\nSnippetsOutlined.displayName = 'SnippetsOutlined';\nexport default /*#__PURE__*/React.forwardRef(SnippetsOutlined);","import React, { Component, Fragment } from 'react'\nimport { Table, Input, Button, Tooltip, Modal } from 'antd'\n\nimport { ContentLayoutComponent } from '@components/index'\nimport { MODAL_SIZE } from '@constants/index'\nimport ProjectCollecrtionComponent from './ProjectCollection'\nimport { listMixin } from '@components/Mixin'\nimport {\n  getProjects,\n  createProject,\n  updateProject,\n  getProjectDetail,\n  deleteProject,\n} from '@apis/index'\nimport type { IListMixin } from '@interfaces/mixin'\nimport {\n  SettingOutlined,\n  EditOutlined,\n  DeleteOutlined,\n  SearchOutlined,\n  PlusOutlined,\n  SnippetsOutlined,\n} from '@ant-design/icons'\nimport i18n from 'i18next'\n\nclass UserView extends Component<IListMixin, any> {\n  init() {\n    return {\n      fetchAction: getProjects,\n      getDetailAction: getProjectDetail,\n      createAction: createProject,\n      updateAction: updateProject,\n      deleteAction: deleteProject,\n    }\n  }\n\n  editAction(record) {\n    this.props.editEntity(record._id)\n  }\n\n  deleteAction(record) {\n    this.props.deleteEntity(record._id)\n  }\n\n  detailAction(record){\n    // @ts-ignore\n    const { history } = this.props\n    history.push(`/projects/${record._id}`)\n  }\n\n  getTable() {\n    const { data, loading, pagination, getRowKey } = this.props\n    const columns = [\n      {\n        title: i18n.t('list.name'),\n        dataIndex: 'name',\n        key: 'name',\n        render: (text) => text,\n      },\n      {\n        title: i18n.t('list.description'),\n        dataIndex: 'description',\n        key: 'description',\n      },\n      //   {\n      //     title: i18n.t('list.address'),\n      //     dataIndex: 'address',\n      //     key: 'address',\n      //   },\n      {\n        title: i18n.t('list.operation'),\n        key: 'action',\n        width: 200,\n        render: (text, record) => (\n          <span>\n            {/* <span className=\"m-l-12 m-r-12 icon-actions\">\n              <SettingOutlined /> {i18n.t('action.setting')}\n            </span> */}\n            <span className=\"m-l-12 m-r-12 icon-actions\">\n              <Tooltip placement=\"top\" title={i18n.t('action.edit')}>\n                <SnippetsOutlined onClick={this.detailAction.bind(this, record)} />\n              </Tooltip>\n            </span>\n            <span className=\"m-l-12 m-r-12 icon-actions\">\n              <Tooltip placement=\"top\" title={i18n.t('action.edit')}>\n                <EditOutlined onClick={this.editAction.bind(this, record)} />\n              </Tooltip>\n            </span>\n            <span className=\"m-l-12 m-r-12 icon-actions\">\n              <Tooltip placement=\"top\" title={i18n.t('action.delete')}>\n                <DeleteOutlined onClick={this.deleteAction.bind(this, record)} />\n              </Tooltip>\n            </span>\n          </span>\n        ),\n      },\n    ]\n\n    return (\n      <Table\n        rowKey={getRowKey}\n        pagination={pagination}\n        loading={loading}\n        bordered={true}\n        columns={columns}\n        dataSource={data}\n      />\n    )\n  }\n\n  render() {\n    const {\n      searchAction,\n      isCollectionVisible,\n      openCollection,\n      closeCollection,\n      collectionCallBack,\n      entity,\n    } = this.props\n    return (\n      <ContentLayoutComponent>\n        <Fragment key=\"left\">\n          <Input\n            className=\"search\"\n            onKeyDown={searchAction}\n            suffix={<SearchOutlined />}\n            placeholder={i18n.t('list.search')}\n          />\n        </Fragment>\n        <Fragment key=\"actions\">\n          <Button\n            type=\"primary\"\n            icon={<PlusOutlined />}\n            className={`${'action-btn'}`}\n            onClick={openCollection}\n          >\n            {i18n.t('action.create')}\n          </Button>\n        </Fragment>\n        <Fragment key=\"main\">\n          {this.getTable()}\n          <Modal\n            title={i18n.t('action.create')}\n            visible={isCollectionVisible}\n            width={MODAL_SIZE.md}\n            destroyOnClose={true}\n            footer={false}\n            onCancel={closeCollection}\n          >\n            {\n              // @ts-ignore\n              <ProjectCollecrtionComponent entity={entity} callback={collectionCallBack} />\n            }\n          </Modal>\n        </Fragment>\n      </ContentLayoutComponent>\n    )\n  }\n}\n\nexport default listMixin(UserView)\n","/*\n * @Author: D.Y\n * @Date: 2021-04-20 19:17:58\n * @LastEditTime: 2021-04-24 09:36:00\n * @LastEditors: D.Y\n * @FilePath: /arthemis-client/src/apis/scrum.ts\n * @Description:\n */\nimport type { IScrum } from '@interfaces/scrum'\nimport request from '@utils/request'\n\nexport const getProjectScrums = (params = {}) => {\n  return request({\n    url: '/scrums',\n    method: 'get',\n    params,\n  })\n}\n\nexport const createScrum = (data: IScrum) => {\n  return request({\n    url: '/scrums',\n    method: 'post',\n    data,\n  })\n}\n\nexport const updateScrum = (_id, data: IScrum) => {\n  return request({\n    url: `/scrums/${_id}`,\n    method: 'put',\n    data,\n  })\n}\n\nexport const getScrumDetail = (_id, params = {}) => {\n  return request({\n    url: `/scrums/${_id}`,\n    method: 'get',\n    params,\n  })\n}\n\nexport const deleteScrum = (_id) => {\n  return request({\n    url: `/scrums/${_id}`,\n    method: 'delete',\n  })\n}\n","/*\n * @Author: D.Y\n * @Date: 2021-04-14 19:16:26\n * @LastEditTime: 2021-04-21 10:02:26\n * @LastEditors: D.Y\n * @FilePath: /arthemis-client/src/apis/tasks.ts\n * @Description:\n */\nimport type { Task } from '@interfaces/task'\nimport request from '@utils/request'\n\nexport const createTask = (data: Task) => {\n  return request({\n    url: '/tasks',\n    method: 'post',\n    data,\n  })\n}\n\nexport const updateTask = (_id: string, data: Task) => {\n  return request({\n    url: `/tasks/${_id}`,\n    method: 'put',\n    data,\n  })\n}\n\nexport const deleteTask = (_id: string) => {\n  return request({\n    url: `/tasks/${_id}`,\n    method: 'delete',\n  })\n}\n\nexport const getTaskDetail = (_id: string, params = {}) => {\n  return request({\n    url: `/tasks/${_id}`,\n    method: 'get',\n    params,\n  })\n}\n\nexport const getTasks = (params = {}) => {\n  return request({\n    url: '/tasks',\n    method: 'get',\n    params,\n  })\n}\n\nexport const sortTasks = (\n  _id: string,\n  data: {\n    fromId: string\n    toId: string\n    oldIndex: number\n    newIndex: number\n  },\n) => {\n  return request({\n    url: `/tasks/${_id}/sort`,\n    method: 'post',\n    data,\n  })\n}\n\nexport const summaryTask = (data: { content: string; dateNumber: string }) => {\n  return request({\n    url: '/task-summary',\n    method: 'post',\n    data,\n  })\n}\nexport const getSummary = (params = {}) => {\n  return request({\n    url: '/task-summary',\n    method: 'get',\n    params,\n  })\n}\n","/*\n * @Author: D.Y\n * @Date: 2021-02-04 15:27:20\n * @LastEditTime: 2021-04-20 15:54:24\n * @LastEditors: D.Y\n * @FilePath: /arthemis-client/src/apis/project.ts\n * @Description: \n */\n\nimport type { IProject } from '@interfaces/project'\nimport request from '@utils/request'\n\n\nexport const getProjects = (params = {}) => {\n  return request({\n    url: '/projects',\n    method: 'get',\n    params,\n  })\n}\n\nexport const createProject = (data: IProject) => {\n  return request({\n    url: '/projects',\n    method: 'post',\n    data,\n  })\n}\n\nexport const getProjectDetail = (id: string, params = {}) => {\n  return request({\n    url: `/projects/${id}`,\n    method: 'get',\n    params,\n  })\n}\n\nexport const updateProject = (id: string, data: IProject) => {\n  return request({\n    url: `/projects/${id}`,\n    method: 'put',\n    data,\n  })\n}\n\nexport const deleteProject = (id: string) => {\n  return request({\n    url: `/projects/${id}`,\n    method: 'delete',\n  })\n}\n","/*\n * @Author: D.Y\n * @Date: 2021-05-06 16:15:09\n * @LastEditTime: 2021-05-06 16:15:33\n * @LastEditors: D.Y\n * @FilePath: /arthemis-client/src/apis/Graph.ts\n * @Description: \n */\nimport request from '@utils/request'\n\nexport const getGraphs = (params = {}) => {\n  return request({\n    url: 'graphs',\n    method: 'get',\n    params,\n  })\n}\n\nexport const createGraph = (data) => {\n  return request({\n    url: 'graphs',\n    method: 'post',\n    data,\n  })\n}\n\nexport const getGraphDetail = (id: string, params = {}) => {\n  return request({\n    url: `graphs/${id}`,\n    method: 'get',\n    params,\n  })\n}\n\nexport const updateGraph = (id: string, data) => {\n  return request({\n    url: `graphs/${id}`,\n    method: 'put',\n    data,\n  })\n}\n\nexport const deleteGraph = (id: string) => {\n  return request({\n    url: `graphs/${id}`,\n    method: 'delete',\n  })\n}\n","export * from './tasks'\nexport * from './users'\nexport * from './project'\nexport * from './scrum'\nexport * from './graph'\n","import React, { Component } from 'react'\n\ntype IListState = {\n  data: Record<string, unknown>[]\n  loading: boolean\n  isCollectionVisible: boolean\n  entity: Record<string, unknown>\n}\nexport const listMixin = (ComposedComponent) =>\n  class extends Component<any, IListState> {\n    private instance = null\n    private fetchAction = null\n    private getDetailAction = null\n    private createAction = null\n    private updateAction = null\n    private deleteAction = null\n\n    private beforeFetch = null\n    private afterFtech = null\n    private searchText = ''\n    private pagination = {\n      showSizeChanger: true,\n      onShowSizeChange: this.onShowSizeChange.bind(this),\n      onChange: this.pageChange.bind(this),\n      pageSizeOptions: ['10', '20', '30', '40', '50', '60', '100'],\n      hideOnSinglePage: false,\n      pageIndex: 1,\n      pageSize: 20,\n      total: 0,\n    }\n    constructor(props) {\n      super(props)\n      this.state = {\n        data: [],\n        loading: false,\n        isCollectionVisible: false,\n        entity: null,\n      }\n    }\n\n    componentDidMount() {\n      this.beforeFetch()\n      this.getList()\n      this.afterFtech()\n    }\n\n    searchAction(e) {\n      const code = e.keyCode\n      const { value } = e.target\n      if (code === 13) {\n        this.searchText = value\n        this.pagination.pageIndex = 1\n        this.pagination.pageSize = 20\n        this.getList()\n      }\n    }\n\n    onShowSizeChange(current, pageSize) {\n      this.pagination.pageSize = pageSize\n      this.getList()\n    }\n\n    pageChange(page) {\n      this.pagination.pageIndex = page\n      this.getList()\n    }\n\n    openCollection() {\n      this.setState({\n        isCollectionVisible: true,\n      })\n    }\n\n    closeCollection() {\n      this.setState({\n        isCollectionVisible: false,\n      })\n    }\n\n    collectionCallBack({ isVisible, isRefresh, values = '' }) {\n      isVisible && this.openCollection()\n      !isVisible && this.closeCollection()\n      if (values) {\n        if (!this.state.entity) {\n          // 新建\n          this.createAction(values).then(() => {\n            this.pagination.pageIndex = 1\n            this.getList()\n          })\n        } else {\n          // 修改\n          this.updateAction(this.state.entity._id, values).then(() => {\n            this.pagination.pageIndex = 1\n            this.getList()\n          })\n        }\n      } else {\n        isRefresh && this.getList()\n      }\n    }\n\n    getInstance(instance) {\n      if (instance) {\n        this.instance = instance\n        const {\n          fetchAction = () => {},\n          getDetailAction = () => {},\n          createAction = () => {},\n          updateAction = () => {},\n          deleteAction = () => {},\n          beforeFetch = () => {},\n          afterFtech = () => {},\n        } = this.instance.init()\n        this.fetchAction = fetchAction\n        this.getDetailAction = getDetailAction\n        this.createAction = createAction\n        this.updateAction = updateAction\n        this.deleteAction = deleteAction\n        this.beforeFetch = beforeFetch\n        this.afterFtech = afterFtech\n      }\n    }\n\n    getList() {\n      this.setState({\n        loading: true,\n      })\n      this.fetchAction({\n        pi: this.pagination.pageIndex - 1,\n        ps: this.pagination.pageSize,\n        keyword: this.searchText,\n      }).then((res) => {\n        const { page, total, data } = res\n        this.pagination.total = total\n        this.pagination.pageIndex = page\n        this.setState({\n          loading: false,\n          data,\n        })\n      })\n    }\n\n    editEntity(id: string) {\n      this.getDetailAction(id).then(\n        (data) => {\n          this.setState({\n            entity: data,\n            isCollectionVisible: true,\n          })\n        },\n        (err) => {\n          console.log(err)\n        },\n      )\n    }\n\n    deleteEntity(id: string) {\n      this.deleteAction(id).then(\n        () => {\n          this.pagination.pageIndex = 1\n          this.getList()\n        },\n        (error) => {\n          console.log(error)\n        },\n      )\n    }\n\n    getRowKey(record, index) {\n      return record.id || record._id || index\n    }\n\n    render() {\n      const { loading, data, isCollectionVisible, entity } = this.state\n      return (\n        <ComposedComponent\n          loading={loading}\n          data={data}\n          entity={entity}\n          pagination={this.pagination}\n          isCollectionVisible={isCollectionVisible}\n          searchAction={this.searchAction.bind(this)}\n          openCollection={this.openCollection.bind(this)}\n          closeCollection={this.closeCollection.bind(this)}\n          getRowKey={this.getRowKey.bind(this)}\n          getList={this.getList.bind(this)}\n          collectionCallBack={this.collectionCallBack.bind(this)}\n          editEntity={this.editEntity.bind(this)}\n          deleteEntity={this.deleteEntity.bind(this)}\n          {...this.props}\n          ref={this.getInstance.bind(this)}\n        />\n      )\n    }\n  }\n"],"sourceRoot":""}