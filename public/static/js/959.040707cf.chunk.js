(this["webpackJsonparthmis-client"]=this["webpackJsonparthmis-client"]||[]).push([[959],{1109:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(16),a=n(30),c=n(31),o=n(192),s=n(33),r=n(32),l=n(0),u=n(2),d=function(t){return function(e){Object(s.a)(l,e);var n=Object(r.a)(l);function l(t){var e;return Object(a.a)(this,l),(e=n.call(this,t)).instance=null,e.fetchAction=null,e.getDetailAction=null,e.createAction=null,e.updateAction=null,e.deleteAction=null,e.beforeFetch=null,e.afterFtech=null,e.searchText="",e.pagination={showSizeChanger:!0,onShowSizeChange:e.onShowSizeChange.bind(Object(o.a)(e)),onChange:e.pageChange.bind(Object(o.a)(e)),pageSizeOptions:["10","20","30","40","50","60","100"],hideOnSinglePage:!1,pageIndex:1,pageSize:20,total:0},e.state={data:[],loading:!1,isCollectionVisible:!1,entity:null},e}return Object(c.a)(l,[{key:"componentDidMount",value:function(){this.beforeFetch(),this.getList(),this.afterFtech()}},{key:"searchAction",value:function(t){var e=t.keyCode,n=t.target.value;13===e&&(this.searchText=n,this.pagination.pageIndex=1,this.pagination.pageSize=20,this.getList())}},{key:"onShowSizeChange",value:function(t,e){this.pagination.pageSize=e,this.getList()}},{key:"pageChange",value:function(t){this.pagination.pageIndex=t,this.getList()}},{key:"openCollection",value:function(){this.setState({isCollectionVisible:!0})}},{key:"closeCollection",value:function(){this.setState({isCollectionVisible:!1})}},{key:"collectionCallBack",value:function(t){var e=this,n=t.isVisible,i=t.isRefresh,a=t.values,c=void 0===a?"":a;n&&this.openCollection(),!n&&this.closeCollection(),c?this.state.entity?this.updateAction(this.state.entity._id,c).then((function(){e.pagination.pageIndex=1,e.getList()})):this.createAction(c).then((function(){e.pagination.pageIndex=1,e.getList()})):i&&this.getList()}},{key:"getInstance",value:function(t){if(t){this.instance=t;var e=this.instance.init(),n=e.fetchAction,i=void 0===n?function(){}:n,a=e.getDetailAction,c=void 0===a?function(){}:a,o=e.createAction,s=void 0===o?function(){}:o,r=e.updateAction,l=void 0===r?function(){}:r,u=e.deleteAction,d=void 0===u?function(){}:u,h=e.beforeFetch,f=void 0===h?function(){}:h,p=e.afterFtech,b=void 0===p?function(){}:p;this.fetchAction=i,this.getDetailAction=c,this.createAction=s,this.updateAction=l,this.deleteAction=d,this.beforeFetch=f,this.afterFtech=b}}},{key:"getList",value:function(){var t=this;this.setState({loading:!0}),this.fetchAction({pi:this.pagination.pageIndex-1,ps:this.pagination.pageSize,keyword:this.searchText}).then((function(e){var n=e.page,i=e.total,a=e.data;t.pagination.total=i,t.pagination.pageIndex=n,t.setState({loading:!1,data:a})}))}},{key:"editEntity",value:function(t){var e=this;this.getDetailAction(t).then((function(t){e.setState({entity:t,isCollectionVisible:!0})}),(function(t){console.log(t)}))}},{key:"deleteEntity",value:function(t){var e=this;this.deleteAction(t).then((function(){e.pagination.pageIndex=1,e.getList()}),(function(t){console.log(t)}))}},{key:"getRowKey",value:function(t,e){return t.id||t._id||e}},{key:"render",value:function(){var e=this.state,n=e.loading,a=e.data,c=e.isCollectionVisible,o=e.entity;return Object(u.jsx)(t,Object(i.a)(Object(i.a)({loading:n,data:a,entity:o,pagination:this.pagination,isCollectionVisible:c,searchAction:this.searchAction.bind(this),openCollection:this.openCollection.bind(this),closeCollection:this.closeCollection.bind(this),getRowKey:this.getRowKey.bind(this),getList:this.getList.bind(this),collectionCallBack:this.collectionCallBack.bind(this),editEntity:this.editEntity.bind(this),deleteEntity:this.deleteEntity.bind(this)},this.props),{},{ref:this.getInstance.bind(this)}))}}]),l}(l.Component)}},2028:function(t,e,n){"use strict";n.r(e);n(280);var i=n(189),a=n.n(i),c=(n(274),n(176)),o=n.n(c),s=(n(584),n(586)),r=n.n(s),l=(n(1166),n(1167)),u=n.n(l),d=(n(279),n(181)),h=n.n(d),f=n(30),p=n(31),b=n(33),g=n(32),j=n(0),v=n(44),m=n(52),O=(n(589),n(590)),y=n.n(O),k=n(22),x=n(191),C=n(601),A=n.n(C),S=n(2),w=function(t){Object(b.a)(n,t);var e=Object(g.a)(n);function n(t){var i;return Object(f.a)(this,n),(i=e.call(this,t)).state={loading:!1},i}return Object(p.a)(n,[{key:"componentDidMount",value:function(){}},{key:"cancel",value:function(t){t.preventDefault(),this.props.callback({isVisible:!1,isRefresh:!1,values:""})}},{key:"handleSubmit",value:function(t){this.props.callback({isVisible:!1,isRefresh:!0,values:t})}},{key:"checkPhone",value:function(t,e,n){Object(x.a)(e)?n():n("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801")}},{key:"render",value:function(){var t=this.props.entity;return Object(S.jsxs)(y.a,{labelCol:{span:24},wrapperCol:{span:24},onFinish:this.handleSubmit.bind(this),initialValues:{name:t?t.name:"",description:t?t.description:""},children:[Object(S.jsx)(y.a.Item,{label:"\u7528\u6237\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d"}],children:Object(S.jsx)(r.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})}),Object(S.jsx)(y.a.Item,{label:"\u63cf\u8ff0",name:"description",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63cf\u8ff0"}],children:Object(S.jsx)(A.a,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0"})}),Object(S.jsxs)(y.a.Item,{children:[Object(S.jsx)(o.a,{type:"primary",htmlType:"submit",className:"m-r-12",children:k.a.t("action.save")}),Object(S.jsxs)(o.a,{onClick:this.cancel.bind(this),children:[" ",k.a.t("action.cancel")]})]})]})}}]),n}(j.Component),V=n(1109),I=n(602),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 112H724V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H500V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H320c-17.7 0-32 14.3-32 32v120h-96c-17.7 0-32 14.3-32 32v632c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32v-96h96c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM664 888H232V336h218v174c0 22.1 17.9 40 40 40h174v338zm0-402H514V336h.2L664 485.8v.2zm128 274h-56V456L544 264H360v-80h68v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h152v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h68v576z"}}]},name:"snippets",theme:"outlined"},L=n(21),F=function(t,e){return j.createElement(L.a,Object.assign({},t,{ref:e,icon:z}))};F.displayName="SnippetsOutlined";var D=j.forwardRef(F),E=n(2037),R=n(2022),N=n(2038),H=n(2021),K=function(t){Object(b.a)(n,t);var e=Object(g.a)(n);function n(){return Object(f.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"init",value:function(){return{fetchAction:I.h,getDetailAction:I.g,createAction:I.a,updateAction:I.o,deleteAction:I.d}}},{key:"editAction",value:function(t){this.props.editEntity(t._id)}},{key:"deleteAction",value:function(t){this.props.deleteEntity(t._id)}},{key:"detailAction",value:function(t){this.props.history.push("/projects/".concat(t._id))}},{key:"getTable",value:function(){var t=this,e=this.props,n=e.data,i=e.loading,a=e.pagination,c=e.getRowKey,o=[{title:k.a.t("list.name"),dataIndex:"name",key:"name",render:function(t){return t}},{title:k.a.t("list.description"),dataIndex:"description",key:"description"},{title:k.a.t("list.operation"),key:"action",width:200,render:function(e,n){return Object(S.jsxs)("span",{children:[Object(S.jsx)("span",{className:"m-l-12 m-r-12 icon-action",children:Object(S.jsx)(h.a,{placement:"top",title:k.a.t("action.edit"),children:Object(S.jsx)(D,{onClick:t.detailAction.bind(t,n)})})}),Object(S.jsx)("span",{className:"m-l-12 m-r-12 icon-action",children:Object(S.jsx)(h.a,{placement:"top",title:k.a.t("action.edit"),children:Object(S.jsx)(E.a,{onClick:t.editAction.bind(t,n)})})}),Object(S.jsx)("span",{className:"m-l-12 m-r-12 icon-action",children:Object(S.jsx)(h.a,{placement:"top",title:k.a.t("action.delete"),children:Object(S.jsx)(R.a,{onClick:t.deleteAction.bind(t,n)})})})]})}}];return Object(S.jsx)(u.a,{rowKey:c,pagination:a,loading:i,bordered:!0,columns:o,dataSource:n})}},{key:"render",value:function(){var t=this.props,e=t.searchAction,n=t.isCollectionVisible,i=t.openCollection,c=t.closeCollection,s=t.collectionCallBack,l=t.entity;return Object(S.jsxs)(v.a,{children:[Object(S.jsx)(j.Fragment,{children:Object(S.jsx)(r.a,{className:"search",onKeyDown:e,suffix:Object(S.jsx)(N.a,{}),placeholder:k.a.t("list.search")})},"left"),Object(S.jsx)(j.Fragment,{children:Object(S.jsx)(o.a,{type:"primary",icon:Object(S.jsx)(H.a,{}),className:"action-btn",onClick:i,children:k.a.t("action.create")})},"actions"),Object(S.jsxs)(j.Fragment,{children:[this.getTable(),Object(S.jsx)(a.a,{title:k.a.t("action.create"),visible:n,width:m.c.md,destroyOnClose:!0,footer:!1,onCancel:c,children:Object(S.jsx)(w,{entity:l,callback:s})})]},"main")]})}}]),n}(j.Component);e.default=Object(V.a)(K)},576:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"h",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return u})),n.d(e,"c",(function(){return d}));var i=n(54),a=function(t){return Object(i.a)({url:"/tasks",method:"post",data:t})},c=function(t,e){return Object(i.a)({url:"/tasks/".concat(t),method:"put",data:e})},o=function(t){return Object(i.a)({url:"/tasks/".concat(t),method:"delete"})},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)({url:"/tasks/".concat(t),method:"get",params:e})},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/tasks",method:"get",params:t})},l=function(t,e){return Object(i.a)({url:"/tasks/".concat(t,"/sort"),method:"post",data:e})},u=function(t){return Object(i.a)({url:"/task-summary",method:"post",data:t})},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/task-summary",method:"get",params:t})}},578:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return r}));var i=n(54),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/projects",method:"get",params:t})},c=function(t){return Object(i.a)({url:"/projects",method:"post",data:t})},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)({url:"/projects/".concat(t),method:"get",params:e})},s=function(t,e){return Object(i.a)({url:"/projects/".concat(t),method:"put",data:e})},r=function(t){return Object(i.a)({url:"/projects/".concat(t),method:"delete"})}},579:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));var i=n(54),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/scrums",method:"get",params:t})},c=function(t){return Object(i.a)({url:"/scrums",method:"post",data:t})}},602:function(t,e,n){"use strict";var i=n(576);n.d(e,"b",(function(){return i.a})),n.d(e,"e",(function(){return i.b})),n.d(e,"i",(function(){return i.c})),n.d(e,"j",(function(){return i.e})),n.d(e,"m",(function(){return i.f})),n.d(e,"n",(function(){return i.g})),n.d(e,"p",(function(){return i.h}));var a=n(103);n.d(e,"c",(function(){return a.a})),n.d(e,"f",(function(){return a.b})),n.d(e,"k",(function(){return a.c})),n.d(e,"l",(function(){return a.e})),n.d(e,"q",(function(){return a.g}));var c=n(578);n.d(e,"a",(function(){return c.a})),n.d(e,"d",(function(){return c.b})),n.d(e,"g",(function(){return c.c})),n.d(e,"h",(function(){return c.d})),n.d(e,"o",(function(){return c.e}));n(579)}}]);
//# sourceMappingURL=959.040707cf.chunk.js.map