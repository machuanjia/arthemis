(this["webpackJsonparthmis-client"]=this["webpackJsonparthmis-client"]||[]).push([[959],{2306:function(t,e,n){"use strict";n.r(e);n(298);var i=n(190),c=n.n(i),a=(n(293),n(181)),o=n.n(a),r=(n(640),n(642)),s=n.n(r),u=(n(1232),n(1233)),l=n.n(u),d=(n(296),n(186)),h=n.n(d),f=n(30),p=n(31),b=n(33),g=n(32),j=n(0),v=n(45),m=n(55),O=(n(662),n(663)),y=n.n(O),k=n(24),x=n(684),C=n.n(x),A=n(3),S=function(t){Object(b.a)(n,t);var e=Object(g.a)(n);function n(t){var i;return Object(f.a)(this,n),(i=e.call(this,t)).state={loading:!1},i}return Object(p.a)(n,[{key:"componentDidMount",value:function(){}},{key:"cancel",value:function(t){t.preventDefault(),this.props.callback({isVisible:!1,isRefresh:!1,values:""})}},{key:"handleSubmit",value:function(t){this.props.callback({isVisible:!1,isRefresh:!0,values:t})}},{key:"render",value:function(){var t=this.props.entity;return Object(A.jsxs)(y.a,{labelCol:{span:24},wrapperCol:{span:24},onFinish:this.handleSubmit.bind(this),initialValues:{name:t?t.name:"",description:t?t.description:""},children:[Object(A.jsx)(y.a.Item,{label:"\u7528\u6237\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d"}],children:Object(A.jsx)(s.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})}),Object(A.jsx)(y.a.Item,{label:"\u63cf\u8ff0",name:"description",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63cf\u8ff0"}],children:Object(A.jsx)(C.a,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0"})}),Object(A.jsxs)(y.a.Item,{children:[Object(A.jsx)(o.a,{type:"primary",htmlType:"submit",className:"m-r-12",children:k.a.t("action.save")}),Object(A.jsxs)(o.a,{onClick:this.cancel.bind(this),children:[" ",k.a.t("action.cancel")]})]})]})}}]),n}(j.Component),w=n(691),V=n(664),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 112H724V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H500V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H320c-17.7 0-32 14.3-32 32v120h-96c-17.7 0-32 14.3-32 32v632c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32v-96h96c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM664 888H232V336h218v174c0 22.1 17.9 40 40 40h174v338zm0-402H514V336h.2L664 485.8v.2zm128 274h-56V456L544 264H360v-80h68v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h152v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h68v576z"}}]},name:"snippets",theme:"outlined"},z=n(21),L=function(t,e){return j.createElement(z.a,Object.assign({},t,{ref:e,icon:I}))};L.displayName="SnippetsOutlined";var F=j.forwardRef(L),D=n(2312),E=n(2277),R=n(2313),N=n(577),H=function(t){Object(b.a)(n,t);var e=Object(g.a)(n);function n(){return Object(f.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"init",value:function(){return{fetchAction:V.l,getDetailAction:V.k,createAction:V.b,updateAction:V.t,deleteAction:V.f}}},{key:"editAction",value:function(t){this.props.editEntity(t._id)}},{key:"deleteAction",value:function(t){this.props.deleteEntity(t._id)}},{key:"detailAction",value:function(t){this.props.history.push("/projects/".concat(t._id))}},{key:"getTable",value:function(){var t=this,e=this.props,n=e.data,i=e.loading,c=e.pagination,a=e.getRowKey,o=[{title:k.a.t("list.name"),dataIndex:"name",key:"name",render:function(t){return t}},{title:k.a.t("list.description"),dataIndex:"description",key:"description"},{title:k.a.t("list.operation"),key:"action",width:200,render:function(e,n){return Object(A.jsxs)("span",{children:[Object(A.jsx)("span",{className:"m-l-12 m-r-12 icon-actions",children:Object(A.jsx)(h.a,{placement:"top",title:k.a.t("action.edit"),children:Object(A.jsx)(F,{onClick:t.detailAction.bind(t,n)})})}),Object(A.jsx)("span",{className:"m-l-12 m-r-12 icon-actions",children:Object(A.jsx)(h.a,{placement:"top",title:k.a.t("action.edit"),children:Object(A.jsx)(D.a,{onClick:t.editAction.bind(t,n)})})}),Object(A.jsx)("span",{className:"m-l-12 m-r-12 icon-actions",children:Object(A.jsx)(h.a,{placement:"top",title:k.a.t("action.delete"),children:Object(A.jsx)(E.a,{onClick:t.deleteAction.bind(t,n)})})})]})}}];return Object(A.jsx)(l.a,{rowKey:a,pagination:c,loading:i,bordered:!0,columns:o,dataSource:n})}},{key:"render",value:function(){var t=this.props,e=t.searchAction,n=t.isCollectionVisible,i=t.openCollection,a=t.closeCollection,r=t.collectionCallBack,u=t.entity;return Object(A.jsxs)(v.a,{children:[Object(A.jsx)(j.Fragment,{children:Object(A.jsx)(s.a,{className:"search",onKeyDown:e,suffix:Object(A.jsx)(R.a,{}),placeholder:k.a.t("list.search")})},"left"),Object(A.jsx)(j.Fragment,{children:Object(A.jsx)(o.a,{type:"primary",icon:Object(A.jsx)(N.a,{}),className:"action-btn",onClick:i,children:k.a.t("action.create")})},"actions"),Object(A.jsxs)(j.Fragment,{children:[this.getTable(),Object(A.jsx)(c.a,{title:k.a.t("action.create"),visible:n,width:m.c.md,destroyOnClose:!0,footer:!1,onCancel:a,children:Object(A.jsx)(S,{entity:u,callback:r})})]},"main")]})}}]),n}(j.Component);e.default=Object(w.a)(H)},621:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return o}));var i=n(56),c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/scrums",method:"get",params:t})},a=function(t){return Object(i.a)({url:"/scrums",method:"post",data:t})},o=function(t,e){return Object(i.a)({url:"/scrums/".concat(t),method:"put",data:e})}},626:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"h",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return d}));var i=n(56),c=function(t){return Object(i.a)({url:"/tasks",method:"post",data:t})},a=function(t,e){return Object(i.a)({url:"/tasks/".concat(t),method:"put",data:e})},o=function(t){return Object(i.a)({url:"/tasks/".concat(t),method:"delete"})},r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)({url:"/tasks/".concat(t),method:"get",params:e})},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/tasks",method:"get",params:t})},u=function(t,e){return Object(i.a)({url:"/tasks/".concat(t,"/sort"),method:"post",data:e})},l=function(t){return Object(i.a)({url:"/task-summary",method:"post",data:t})},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/task-summary",method:"get",params:t})}},634:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"b",(function(){return s}));var i=n(56),c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/projects",method:"get",params:t})},a=function(t){return Object(i.a)({url:"/projects",method:"post",data:t})},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)({url:"/projects/".concat(t),method:"get",params:e})},r=function(t,e){return Object(i.a)({url:"/projects/".concat(t),method:"put",data:e})},s=function(t){return Object(i.a)({url:"/projects/".concat(t),method:"delete"})}},635:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"b",(function(){return s}));var i=n(56),c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"graphs",method:"get",params:t})},a=function(t){return Object(i.a)({url:"graphs",method:"post",data:t})},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)({url:"graphs/".concat(t),method:"get",params:e})},r=function(t,e){return Object(i.a)({url:"graphs/".concat(t),method:"put",data:e})},s=function(t){return Object(i.a)({url:"graphs/".concat(t),method:"delete"})}},664:function(t,e,n){"use strict";var i=n(626);n.d(e,"c",(function(){return i.a})),n.d(e,"g",(function(){return i.b})),n.d(e,"m",(function(){return i.c})),n.d(e,"n",(function(){return i.e})),n.d(e,"q",(function(){return i.f})),n.d(e,"r",(function(){return i.g})),n.d(e,"u",(function(){return i.h}));var c=n(87);n.d(e,"d",(function(){return c.a})),n.d(e,"h",(function(){return c.b})),n.d(e,"o",(function(){return c.c})),n.d(e,"p",(function(){return c.e})),n.d(e,"v",(function(){return c.g}));var a=n(634);n.d(e,"b",(function(){return a.a})),n.d(e,"f",(function(){return a.b})),n.d(e,"k",(function(){return a.c})),n.d(e,"l",(function(){return a.d})),n.d(e,"t",(function(){return a.e}));n(621);var o=n(635);n.d(e,"a",(function(){return o.a})),n.d(e,"e",(function(){return o.b})),n.d(e,"i",(function(){return o.c})),n.d(e,"j",(function(){return o.d})),n.d(e,"s",(function(){return o.e}))},691:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(18),c=n(30),a=n(31),o=n(192),r=n(33),s=n(32),u=n(0),l=n(3),d=function(t){return function(e){Object(r.a)(u,e);var n=Object(s.a)(u);function u(t){var e;return Object(c.a)(this,u),(e=n.call(this,t)).instance=null,e.fetchAction=null,e.getDetailAction=null,e.createAction=null,e.updateAction=null,e.deleteAction=null,e.beforeFetch=null,e.afterFtech=null,e.searchText="",e.pagination={showSizeChanger:!0,onShowSizeChange:e.onShowSizeChange.bind(Object(o.a)(e)),onChange:e.pageChange.bind(Object(o.a)(e)),pageSizeOptions:["10","20","30","40","50","60","100"],hideOnSinglePage:!1,pageIndex:1,pageSize:20,total:0},e.state={data:[],loading:!1,isCollectionVisible:!1,entity:null},e}return Object(a.a)(u,[{key:"componentDidMount",value:function(){this.beforeFetch(),this.getList(),this.afterFtech()}},{key:"searchAction",value:function(t){var e=t.keyCode,n=t.target.value;13===e&&(this.searchText=n,this.pagination.pageIndex=1,this.pagination.pageSize=20,this.getList())}},{key:"onShowSizeChange",value:function(t,e){this.pagination.pageSize=e,this.getList()}},{key:"pageChange",value:function(t){this.pagination.pageIndex=t,this.getList()}},{key:"openCollection",value:function(){this.setState({isCollectionVisible:!0})}},{key:"closeCollection",value:function(){this.setState({isCollectionVisible:!1})}},{key:"collectionCallBack",value:function(t){var e=this,n=t.isVisible,i=t.isRefresh,c=t.values,a=void 0===c?"":c;n&&this.openCollection(),!n&&this.closeCollection(),a?this.state.entity?this.updateAction(this.state.entity._id,a).then((function(){e.pagination.pageIndex=1,e.getList()})):this.createAction(a).then((function(){e.pagination.pageIndex=1,e.getList()})):i&&this.getList()}},{key:"getInstance",value:function(t){if(t){this.instance=t;var e=this.instance.init(),n=e.fetchAction,i=void 0===n?function(){}:n,c=e.getDetailAction,a=void 0===c?function(){}:c,o=e.createAction,r=void 0===o?function(){}:o,s=e.updateAction,u=void 0===s?function(){}:s,l=e.deleteAction,d=void 0===l?function(){}:l,h=e.beforeFetch,f=void 0===h?function(){}:h,p=e.afterFtech,b=void 0===p?function(){}:p;this.fetchAction=i,this.getDetailAction=a,this.createAction=r,this.updateAction=u,this.deleteAction=d,this.beforeFetch=f,this.afterFtech=b}}},{key:"getList",value:function(){var t=this;this.setState({loading:!0}),this.fetchAction({pi:this.pagination.pageIndex-1,ps:this.pagination.pageSize,keyword:this.searchText}).then((function(e){var n=e.page,i=e.total,c=e.data;t.pagination.total=i,t.pagination.pageIndex=n,t.setState({loading:!1,data:c})}))}},{key:"editEntity",value:function(t){var e=this;this.getDetailAction(t).then((function(t){e.setState({entity:t,isCollectionVisible:!0})}),(function(t){console.log(t)}))}},{key:"deleteEntity",value:function(t){var e=this;this.deleteAction(t).then((function(){e.pagination.pageIndex=1,e.getList()}),(function(t){console.log(t)}))}},{key:"getRowKey",value:function(t,e){return t.id||t._id||e}},{key:"render",value:function(){var e=this.state,n=e.loading,c=e.data,a=e.isCollectionVisible,o=e.entity;return Object(l.jsx)(t,Object(i.a)(Object(i.a)({loading:n,data:c,entity:o,pagination:this.pagination,isCollectionVisible:a,searchAction:this.searchAction.bind(this),openCollection:this.openCollection.bind(this),closeCollection:this.closeCollection.bind(this),getRowKey:this.getRowKey.bind(this),getList:this.getList.bind(this),collectionCallBack:this.collectionCallBack.bind(this),editEntity:this.editEntity.bind(this),deleteEntity:this.deleteEntity.bind(this)},this.props),{},{ref:this.getInstance.bind(this)}))}}]),u}(u.Component)}}}]);
//# sourceMappingURL=959.e1790150.chunk.js.map