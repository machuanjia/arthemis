(this["webpackJsonparthmis-client"]=this["webpackJsonparthmis-client"]||[]).push([[480],{1495:function(t,e,n){"use strict";n.r(e);n(281);var i,a=n(190),c=n.n(a),o=(n(273),n(177)),s=n.n(o),l=(n(589),n(592)),r=n.n(l),u=(n(1407),n(1417)),h=n.n(u),d=(n(277),n(179)),p=n.n(d),b=n(30),f=n(31),g=n(33),j=n(32),y=n(0),v=n(51),m=n(52),O=(n(598),n(599)),k=n.n(O),x=n(22),C=n(191),A=n(2),w=function(t){Object(g.a)(n,t);var e=Object(j.a)(n);function n(t){var i;return Object(b.a)(this,n),(i=e.call(this,t)).state={loading:!1},i}return Object(f.a)(n,[{key:"componentDidMount",value:function(){}},{key:"cancel",value:function(t){t.preventDefault(),this.props.callback({isVisible:!1,isRefresh:!1,values:""})}},{key:"handleSubmit",value:function(t){this.props.callback({isVisible:!1,isRefresh:!0,values:t})}},{key:"checkPhone",value:function(t,e,n){Object(C.a)(e)?n():n("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801")}},{key:"render",value:function(){var t=this.props.entity;return Object(A.jsxs)(k.a,{labelCol:{span:24},wrapperCol:{span:24},onFinish:this.handleSubmit.bind(this),initialValues:{username:t?t.username:"",password:t?t.password:""},children:[Object(A.jsx)(k.a.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],children:Object(A.jsx)(r.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})}),Object(A.jsx)(k.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:Object(A.jsx)(r.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",type:"password"})}),Object(A.jsxs)(k.a.Item,{children:[Object(A.jsx)(s.a,{type:"primary",htmlType:"submit",className:"m-r-12",children:x.a.t("action.save")}),Object(A.jsxs)(s.a,{onClick:this.cancel.bind(this),children:[" ",x.a.t("action.cancel")]})]})]})}}]),n}(y.Component),S=n(16),I=n(194),F=n(634),L=n(1505),V=n(1503),z=n(1506),D=n(1500),E=function(t){Object(g.a)(n,t);var e=Object(j.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"init",value:function(){return{fetchAction:F.h,getDetailAction:F.g,createAction:F.b,updateAction:F.l,deleteAction:F.d}}},{key:"editAction",value:function(t){this.props.editEntity(t._id)}},{key:"deleteAction",value:function(t){this.props.deleteEntity(t._id)}},{key:"getTable",value:function(){var t=this,e=this.props,n=e.data,i=e.loading,a=e.pagination,c=e.getRowKey,o=[{title:x.a.t("list.name"),dataIndex:"username",key:"username",render:function(t){return t}},{title:x.a.t("list.password"),dataIndex:"password",key:"password"},{title:x.a.t("list.operation"),key:"action",width:200,render:function(e,n){return Object(A.jsxs)("span",{children:[Object(A.jsx)("span",{className:"m-l-12 m-r-12 icon-action",children:Object(A.jsx)(p.a,{placement:"top",title:x.a.t("action.edit"),children:Object(A.jsx)(L.a,{onClick:t.editAction.bind(t,n)})})}),Object(A.jsx)("span",{className:"m-l-12 m-r-12 icon-action",children:Object(A.jsx)(p.a,{placement:"top",title:x.a.t("action.delete"),children:Object(A.jsx)(V.a,{onClick:t.deleteAction.bind(t,n)})})})]})}}];return Object(A.jsx)(h.a,{rowKey:c,pagination:a,loading:i,bordered:!0,columns:o,dataSource:n})}},{key:"render",value:function(){var t=this.props,e=t.searchAction,n=t.isCollectionVisible,i=t.openCollection,a=t.closeCollection,o=t.collectionCallBack,l=t.entity;return Object(A.jsxs)(v.a,{children:[Object(A.jsx)(y.Fragment,{children:Object(A.jsx)(r.a,{className:"search",onKeyDown:e,suffix:Object(A.jsx)(z.a,{}),placeholder:x.a.t("list.search")})},"left"),Object(A.jsx)(y.Fragment,{children:Object(A.jsx)(s.a,{type:"primary",icon:Object(A.jsx)(D.a,{}),className:"action-btn",onClick:i,children:x.a.t("action.create")})},"actions"),Object(A.jsxs)(y.Fragment,{children:[this.getTable(),Object(A.jsx)(c.a,{title:x.a.t("action.create"),visible:n,width:m.c.md,destroyOnClose:!0,footer:!1,onCancel:a,children:Object(A.jsx)(w,{entity:l,callback:o})})]},"main")]})}}]),n}(y.Component);e.default=(i=E,function(t){Object(g.a)(n,t);var e=Object(j.a)(n);function n(t){var i;return Object(b.a)(this,n),(i=e.call(this,t)).instance=null,i.fetchAction=null,i.getDetailAction=null,i.createAction=null,i.updateAction=null,i.deleteAction=null,i.beforeFetch=null,i.afterFtech=null,i.searchText="",i.pagination={showSizeChanger:!0,onShowSizeChange:i.onShowSizeChange.bind(Object(I.a)(i)),onChange:i.pageChange.bind(Object(I.a)(i)),pageSizeOptions:["10","20","30","40","50","60","100"],hideOnSinglePage:!1,pageIndex:1,pageSize:20,total:0},i.state={data:[],loading:!1,isCollectionVisible:!1,entity:null},i}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.beforeFetch(),this.getList(),this.afterFtech()}},{key:"searchAction",value:function(t){var e=t.keyCode,n=t.target.value;13===e&&(this.searchText=n,this.pagination.pageIndex=1,this.pagination.pageSize=20,this.getList())}},{key:"onShowSizeChange",value:function(t,e){this.pagination.pageSize=e,this.getList()}},{key:"pageChange",value:function(t){this.pagination.pageIndex=t,this.getList()}},{key:"openCollection",value:function(){this.setState({isCollectionVisible:!0})}},{key:"closeCollection",value:function(){this.setState({isCollectionVisible:!1})}},{key:"collectionCallBack",value:function(t){var e=this,n=t.isVisible,i=t.isRefresh,a=t.values,c=void 0===a?"":a;n&&this.openCollection(),!n&&this.closeCollection(),c?this.state.entity?this.updateAction(this.state.entity._id,c).then((function(){e.pagination.pageIndex=1,e.getList()})):this.createAction(c).then((function(){e.pagination.pageIndex=1,e.getList()})):i&&this.getList()}},{key:"getInstance",value:function(t){if(t){this.instance=t;var e=this.instance.init(),n=e.fetchAction,i=void 0===n?function(){}:n,a=e.getDetailAction,c=void 0===a?function(){}:a,o=e.createAction,s=void 0===o?function(){}:o,l=e.updateAction,r=void 0===l?function(){}:l,u=e.deleteAction,h=void 0===u?function(){}:u,d=e.beforeFetch,p=void 0===d?function(){}:d,b=e.afterFtech,f=void 0===b?function(){}:b;this.fetchAction=i,this.getDetailAction=c,this.createAction=s,this.updateAction=r,this.deleteAction=h,this.beforeFetch=p,this.afterFtech=f}}},{key:"getList",value:function(){var t=this;this.setState({loading:!0}),this.fetchAction({pi:this.pagination.pageIndex-1,ps:this.pagination.pageSize,keyword:this.searchText}).then((function(e){var n=e.page,i=e.total,a=e.data;t.pagination.total=i,t.pagination.pageIndex=n,t.setState({loading:!1,data:a})}))}},{key:"editEntity",value:function(t){var e=this;this.getDetailAction(t).then((function(t){e.setState({entity:t,isCollectionVisible:!0})}),(function(t){console.log(t)}))}},{key:"deleteEntity",value:function(t){var e=this;this.deleteAction(t).then((function(){e.pagination.pageIndex=1,e.getList()}),(function(t){console.log(t)}))}},{key:"getRowKey",value:function(t,e){return t.id||t._id||e}},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.data,a=t.isCollectionVisible,c=t.entity;return Object(A.jsx)(i,Object(S.a)(Object(S.a)({loading:e,data:n,entity:c,pagination:this.pagination,isCollectionVisible:a,searchAction:this.searchAction.bind(this),openCollection:this.openCollection.bind(this),closeCollection:this.closeCollection.bind(this),getRowKey:this.getRowKey.bind(this),getList:this.getList.bind(this),collectionCallBack:this.collectionCallBack.bind(this),editEntity:this.editEntity.bind(this),deleteEntity:this.deleteEntity.bind(this)},this.props),{},{ref:this.getInstance.bind(this)}))}}]),n}(y.Component))},634:function(t,e,n){"use strict";n.d(e,"h",(function(){return i.e})),n.d(e,"b",(function(){return i.a})),n.d(e,"g",(function(){return i.c})),n.d(e,"l",(function(){return i.g})),n.d(e,"d",(function(){return i.b})),n.d(e,"a",(function(){return c})),n.d(e,"k",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"i",(function(){return r})),n.d(e,"j",(function(){return u})),n.d(e,"e",(function(){return h}));var i=n(103),a=n(59),c=function(t){return Object(a.a)({url:"/tasks",method:"post",data:t})},o=function(t,e){return Object(a.a)({url:"/tasks/".concat(t),method:"put",data:e})},s=function(t){return Object(a.a)({url:"/tasks/".concat(t),method:"delete"})},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a.a)({url:"/tasks",method:"get",params:t})},r=function(t,e){return Object(a.a)({url:"/tasks/".concat(t,"/sort"),method:"post",data:e})},u=function(t){return Object(a.a)({url:"/task-summary",method:"post",data:t})},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a.a)({url:"/task-summary",method:"get",params:t})}}}]);
//# sourceMappingURL=480.0ac0340f.chunk.js.map