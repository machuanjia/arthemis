(this["webpackJsonparthmis-client"]=this["webpackJsonparthmis-client"]||[]).push([[8],{733:function(t,e,n){var o=n(79),a=n(734);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var i={insert:"head",singleton:!1};o(a,i);t.exports=a.locals||{}},734:function(t,e,n){"use strict";n.r(e);var o=n(47),a=n.n(o)()(!0);a.push([t.i,".uHzKDZHJcGEeSYxjZTCmV {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 50px;\n}\n._13WU5J_hWfBoYojZ1MzvYe {\n  position: relative;\n  display: grid;\n  grid-gap: 5px;\n  grid-template-rows: 50% 50%;\n  grid-template-columns: 50% 50%;\n  height: 100%;\n  padding: 20px;\n  border-bottom: 1px #d9dee2 solid;\n  border-left: 1px #d9dee2 solid;\n}\n._13WU5J_hWfBoYojZ1MzvYe ._2DcBfWQaznaWC0aEwuSQAP {\n  position: absolute;\n  top: -3px;\n  left: -8px;\n  color: #d9dee2;\n  font-size: 0.875rem;\n}\n._13WU5J_hWfBoYojZ1MzvYe ._1X5h869HtUq2r8rtlTA_82 {\n  position: absolute;\n  right: -3px;\n  bottom: -8px;\n  color: #d9dee2;\n  font-size: 0.875rem;\n}\n._13WU5J_hWfBoYojZ1MzvYe .qGeYEYDj_EpDAN66eyz7O {\n  display: flex;\n  flex-direction: column;\n  background: #fff;\n}\n._13WU5J_hWfBoYojZ1MzvYe .fUznIFR-Qh1RTwoGl5A3G {\n  display: flex;\n  flex-direction: row;\n  padding: 5px;\n  border-bottom: 1px #d9dee2 solid;\n}\n._13WU5J_hWfBoYojZ1MzvYe .fUznIFR-Qh1RTwoGl5A3G ._1Ui8zYZahoI5LFnjlTLak6 {\n  flex: 1;\n  color: #677a8e;\n  font-weight: bold;\n  font-size: 0.75rem;\n}\n._13WU5J_hWfBoYojZ1MzvYe .fUznIFR-Qh1RTwoGl5A3G ._311Xj_HltEI_bamg8WhQA2 {\n  color: #8e9ca8;\n}\n._13WU5J_hWfBoYojZ1MzvYe .fUznIFR-Qh1RTwoGl5A3G ._311Xj_HltEI_bamg8WhQA2 span {\n  cursor: pointer;\n}\n._13WU5J_hWfBoYojZ1MzvYe ._1CRbpB6-6AUR07E-KJczE- {\n  flex: 1;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n._13WU5J_hWfBoYojZ1MzvYe ._1CRbpB6-6AUR07E-KJczE- ._3ztXcbzslLYCGrTerZTdC7 {\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  padding: 8px;\n  color: #3f5361;\n  border-bottom: 1px #f5f7f7 solid;\n  cursor: pointer;\n}\n._13WU5J_hWfBoYojZ1MzvYe ._1CRbpB6-6AUR07E-KJczE- ._3ztXcbzslLYCGrTerZTdC7:hover {\n  background: #f0f2f5;\n}\n._13WU5J_hWfBoYojZ1MzvYe ._1CRbpB6-6AUR07E-KJczE- ._3ztXcbzslLYCGrTerZTdC7:hover .B6Uw0KosFMxTD-0haIiy9 {\n  visibility: visible;\n}\n._13WU5J_hWfBoYojZ1MzvYe ._1CRbpB6-6AUR07E-KJczE- ._3ztXcbzslLYCGrTerZTdC7 ._1LYjvbZufVkcbcQWv9mGXP {\n  flex: 1;\n}\n._13WU5J_hWfBoYojZ1MzvYe ._1CRbpB6-6AUR07E-KJczE- ._3ztXcbzslLYCGrTerZTdC7 .FAAtLHiMbVYvd_lQwDaRb {\n  display: flex;\n  align-items: center;\n}\n._13WU5J_hWfBoYojZ1MzvYe ._1CRbpB6-6AUR07E-KJczE- ._3ztXcbzslLYCGrTerZTdC7 .B6Uw0KosFMxTD-0haIiy9 {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  padding-right: 12px;\n  background: #f0f2f5;\n  visibility: hidden;\n  transition: all cubic-bezier(0.215, 0.61, 0.355, 1);\n}\n._13WU5J_hWfBoYojZ1MzvYe ._2fOYFpGJzlphbalE7fTdm0 {\n  border-top: 1px #f5f7f7 solid;\n}\n._2Bm-kqwz8tV2l5wNH3GhAU .eRIPLfJnSOucp-25FvI6O {\n  color: #3f5361;\n  font-weight: bold;\n  font-size: 30px;\n  text-align: center;\n}\n._2Bm-kqwz8tV2l5wNH3GhAU ._2CpXIGhjjU0UjT4aXSAycA {\n  display: flex;\n  justify-content: center;\n  padding: 40px;\n}\n._2Bm-kqwz8tV2l5wNH3GhAU .OhiSjmyejWuWdKR8aXF1z {\n  display: flex;\n  justify-content: center;\n}\n","",{version:3,sources:["webpack://src/views/task/index.module.less"],names:[],mappings:"AACA;EACE,kBAAA;EACA,MAAA;EACA,QAAA;EACA,UAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,YAAA;AAAF;AAEA;EACE,kBAAA;EACA,aAAA;EACA,aAAA;EACA,2BAAA;EACA,8BAAA;EACA,YAAA;EACA,aAAA;EACA,gCAAA;EACA,8BAAA;AAAF;AATA;EAWI,kBAAA;EACA,SAAA;EACA,UAAA;EACA,cAAA;EACA,mBAAA;AACJ;AAhBA;EAkBI,kBAAA;EACA,WAAA;EACA,YAAA;EACA,cAAA;EACA,mBAAA;AACJ;AAvBA;EAyBI,aAAA;EACA,sBAAA;EACA,gBAAA;AACJ;AACI;EACE,aAAA;EACA,mBAAA;EACA,YAAA;EACA,gCAAA;AACN;AALI;EAMI,OAAA;EACA,cAAA;EACA,iBAAA;EACA,kBAAA;AAER;AAXI;EAYI,cAAA;AAER;AAdI;EAcM,eAAA;AAGV;AACI;EACE,OAAA;EACA,kBAAA;EACA,gBAAA;AACN;AAJI;EAKI,kBAAA;EACA,aAAA;EACA,mBAAA;EACA,YAAA;EACA,cAAA;EACA,gCAAA;EACA,eAAA;AAER;AADQ;EACE,mBAAA;AAGV;AAJQ;EAGI,mBAAA;AAIZ;AAnBI;EAmBM,OAAA;AAGV;AAtBI;EAsBM,aAAA;EACA,mBAAA;AAGV;AA1BI;EA0BM,kBAAA;EACA,MAAA;EACA,QAAA;EACA,SAAA;EACA,SAAA;EACA,aAAA;EACA,mBAAA;EACA,yBAAA;EACA,mBAAA;EACA,mBAAA;EACA,kBAAA;EACA,mDAAA;AAGV;AACI;EACE,6BAAA;AACN;AAIA;EAEI,cAAA;EACA,iBAAA;EACA,eAAA;EACA,kBAAA;AAHJ;AAFA;EAQI,aAAA;EACA,uBAAA;EACA,aAAA;AAHJ;AAPA;EAaI,aAAA;EACA,uBAAA;AAHJ",sourcesContent:["@import '@styles/variables.less';\n.task-aside {\n  position: absolute;\n  top: 0;\n  right:0;\n  left:60px;\n  display:flex;\n  align-items: center;\n  justify-content: center;\n  height:50px;\n}\n.task-wrap {\n  position: relative;\n  display: grid;\n  grid-gap: 5px;\n  grid-template-rows: 50% 50%;\n  grid-template-columns: 50% 50%;\n  height: 100%;\n  padding: 20px;\n  border-bottom: 1px @border-gray solid;\n  border-left: 1px @border-gray solid;\n  .arrow-top {\n    position: absolute;\n    top: -3px;\n    left: -8px;\n    color: @border-gray;\n    font-size: 0.875rem;\n  }\n  .arrow-right {\n    position: absolute;\n    right: -3px;\n    bottom: -8px;\n    color: @border-gray;\n    font-size: 0.875rem;\n  }\n  .task-item {\n    display: flex;\n    flex-direction: column;\n    background: @bg-white;\n\n    &-header {\n      display: flex;\n      flex-direction: row;\n      padding: 5px;\n      border-bottom: 1px @border-gray solid;\n      .task-item-header-title {\n        flex: 1;\n        color: @text-desc;\n        font-weight: bold;\n        font-size: 0.75rem;\n      }\n      .task-item-header-action {\n        color: @icon;\n        span {\n          cursor: pointer;\n        }\n      }\n    }\n    &-body {\n      flex: 1;\n      overflow-x: hidden;\n      overflow-y: auto;\n      .task-item-wrap {\n        position: relative;\n        display: flex;\n        flex-direction: row;\n        padding: 8px;\n        color: @text-dark;\n        border-bottom: 1px @border solid;\n        cursor: pointer;\n        &:hover {\n          background: @bg-main;\n          .task-item-actions {\n            visibility: visible;\n          }\n        }\n        .task-item-title {\n          flex: 1;\n        }\n        .task-item-heart {\n          display: flex;\n          align-items: center;\n        }\n        .task-item-actions {\n          position: absolute;\n          top: 0;\n          right: 0;\n          bottom: 0;\n          left: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: flex-end;\n          padding-right: 12px;\n          background: @bg-main;\n          visibility: hidden;\n          transition: all cubic-bezier(0.215, 0.61, 0.355, 1);\n        }\n      }\n    }\n    &-footer {\n      border-top: 1px @border solid;\n    }\n  }\n}\n\n.tomato-wrap {\n  .tomato-title {\n    color: @text-dark;\n    font-weight: bold;\n    font-size: 30px;\n    text-align: center;\n  }\n  .tomato-clock {\n    display: flex;\n    justify-content: center;\n    padding: 40px;\n  }\n  .tomato-actions {\n    display: flex;\n    justify-content: center;\n  }\n}\n\n@laiye-primary-color: #2249c0;@laiye-link-color: #2249c0;"],sourceRoot:""}]),a.locals={"task-aside":"uHzKDZHJcGEeSYxjZTCmV","task-wrap":"_13WU5J_hWfBoYojZ1MzvYe","arrow-top":"_2DcBfWQaznaWC0aEwuSQAP","arrow-right":"_1X5h869HtUq2r8rtlTA_82","task-item":"qGeYEYDj_EpDAN66eyz7O","task-item-header":"fUznIFR-Qh1RTwoGl5A3G","task-item-header-title":"_1Ui8zYZahoI5LFnjlTLak6","task-item-header-action":"_311Xj_HltEI_bamg8WhQA2","task-item-body":"_1CRbpB6-6AUR07E-KJczE-","task-item-wrap":"_3ztXcbzslLYCGrTerZTdC7","task-item-actions":"B6Uw0KosFMxTD-0haIiy9","task-item-title":"_1LYjvbZufVkcbcQWv9mGXP","task-item-heart":"FAAtLHiMbVYvd_lQwDaRb","task-item-footer":"_2fOYFpGJzlphbalE7fTdm0","tomato-wrap":"_2Bm-kqwz8tV2l5wNH3GhAU","tomato-title":"eRIPLfJnSOucp-25FvI6O","tomato-clock":"_2CpXIGhjjU0UjT4aXSAycA","tomato-actions":"OhiSjmyejWuWdKR8aXF1z"},e.default=a},765:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return Q}));n(281);var o=n(245),a=n.n(o),i=(n(274),n(173)),s=n.n(i),A=(n(594),n(596)),r=n.n(A),c=(n(595),n(612)),l=n.n(c),d=(n(722),n(743)),u=n.n(d),p=n(185),h=n(113),m=n(72),b=n.n(m),f=n(100),j=n(30),x=n(31),C=n(33),k=n(32),E=(n(726),n(735)),g=n.n(E),y=n(767),v=n(768),O=n(769),_=n(770),B=n(771),w=n(772),z=n(773),Y=(n(178),n(56)),T=function(t,e){return Object(Y.a)({url:"/tasks/".concat(t),method:"put",data:e})},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Y.a)({url:"/tasks",method:"get",params:t})},W=n(180),U=n(91),J=n(0),G=n(730),R=n(732),S=n.n(R),Z=n(733),M=n.n(Z),N=n(48),V=n(155),F=n.n(V),X=n(2),L=g.a.Option,Q=function(t){Object(C.a)(n,t);var e=Object(k.a)(n);function n(t){var o;return Object(j.a)(this,n),(o=e.call(this,t)).groups=[{key:"list1",name:"\u7d27\u6025\u4e0d\u91cd\u8981"},{key:"list2",name:"\u91cd\u8981\u7d27\u6025"},{key:"list3",name:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025"},{key:"list4",name:"\u91cd\u8981\u4e0d\u7d27\u6025"}],o.countOptions={rest:{label:"\u4f11\u606f\u4e2d",seconds:5},work:{label:"\u5de5\u4f5c\u4e2d",seconds:10}},o.mt=F()(),o.start=o.mt.startOf("day").format("X"),o.end=o.mt.endOf("day").format("X"),o.changeGroup=function(t){o.setState({group:t})},o.changeDate=function(t,e){var n=F()(t);o.start=n.startOf("day").format("X"),o.end=n.endOf("day").format("X"),o.getList()},o.state={list1:[],list2:[],list3:[],list4:[],group:"",isCollectionVisible:!1,isTomatoVisible:!1,entity:null,tomatoTitle:o.countOptions.rest.label,countSeconds:o.countOptions.rest.seconds},o}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var t=Object(f.a)(b.a.mark((function t(){var e,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return F()(),t.next=3,I({start:this.start,end:this.end});case 3:e=t.sent,n=Object(N.groupBy)(e,"group"),this.setState({list1:Object(N.sortBy)(n.list1||[],"position"),list2:Object(N.sortBy)(n.list2||[],"position"),list3:Object(N.sortBy)(n.list3||[],"position"),list4:Object(N.sortBy)(n.list4||[],"position")});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setList",value:function(t,e){this.setState(Object(p.a)({},t,Object(h.a)(e)))}},{key:"updateChangeTask",value:function(){var t=Object(f.a)(b.a.mark((function t(e,n){var o,a,i,s,A,r,c,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.item,a=n.to,i=n.from,s=n.oldIndex,A=n.newIndex,r=o.getAttribute("data-id"),c=i.getAttribute("id"),l=a.getAttribute("id"),t.next=6,e=r,d={fromId:c,toId:l,oldIndex:s,newIndex:A},Object(Y.a)({url:"/tasks/".concat(e,"/sort"),method:"post",data:d});case 6:case"end":return t.stop()}var e,d}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"openCollection",value:function(t){this.setState({group:t,isCollectionVisible:!0})}},{key:"closeCollection",value:function(){this.setState({isCollectionVisible:!1})}},{key:"onFinish",value:function(){var t=Object(f.a)(b.a.mark((function t(e){var n,o,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.state.entity){t.next=7;break}return t.next=3,T(this.state.entity._id,e);case 3:n=t.sent,this.state.group&&n&&(o=Object(N.findIndex)(this.state[this.state.group],{_id:n._id}),this.state[this.state.group].splice(o,1,n),this.setState(Object(p.a)({entity:null},this.state.group,Object(h.a)(this.state[this.state.group])))),t.next=11;break;case 7:return t.next=9,i=e,Object(Y.a)({url:"/tasks",method:"post",data:i});case 9:a=t.sent,this.state.group&&a&&this.setState(Object(p.a)({},this.state.group,[].concat(Object(h.a)(this.state[this.state.group]),[a])));case 11:this.closeCollection();case 12:case"end":return t.stop()}var i}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"editTask",value:function(t){t&&this.setState({entity:t}),this.openCollection(t.group)}},{key:"startTomato",value:function(t){this.setState({entity:t,tomatoTitle:t.name,countSeconds:this.countOptions.work.seconds,isTomatoVisible:!0})}},{key:"countCompleted",value:function(){var t=Object(f.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.countSeconds!==this.countOptions.work.seconds){t.next=8;break}return this.setState({tomatoTitle:this.countOptions.rest.label,countSeconds:this.countOptions.rest.seconds,isTomatoVisible:!0}),e=Object(N.find)(this.state[this.state.entity.group],{_id:this.state.entity._id}),t.next=5,T(this.state.entity._id,{tomato:this.state.entity.tomato+1});case 5:e.tomato+=1,t.next=9;break;case 8:this.setState({tomatoTitle:this.state.entity.name,countSeconds:this.countOptions.work.seconds,isTomatoVisible:!0});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"removeTask",value:function(){var t=Object(f.a)(b.a.mark((function t(e){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=e._id,Object(Y.a)({url:"/tasks/".concat(n),method:"delete"});case 2:Object(N.remove)(this.state[e.group],{_id:e._id}),this.setState(Object(p.a)({},e.group,Object(h.a)(this.state[e.group])));case 4:case"end":return t.stop()}var n}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"taskOk",value:function(){}},{key:"taskRestart",value:function(){this.setState({countSeconds:this.countOptions.work.seconds,isTomatoVisible:!0})}},{key:"taskStop",value:function(){this.setState({tomatoTitle:this.countOptions.rest.label,countSeconds:this.countOptions.rest.seconds,isTomatoVisible:!1})}},{key:"render",value:function(){var t=this,e=this.state,n=e.isCollectionVisible,o=e.isTomatoVisible,i=e.group,A=e.entity,c=e.tomatoTitle,d=e.countSeconds;return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("div",{className:M.a["task-aside"],children:Object(X.jsx)(u.a,{defaultValue:F()(),clearIcon:!1,onChange:this.changeDate})}),Object(X.jsxs)("div",{className:M.a["task-wrap"],children:[Object(X.jsx)(y.a,{className:M.a["arrow-right"]}),Object(X.jsx)(v.a,{className:M.a["arrow-top"]}),this.groups.map((function(e){var n=e.key,o=e.name;return Object(X.jsxs)("div",{className:M.a["task-item"],children:[Object(X.jsxs)("div",{className:M.a["task-item-header"],children:[Object(X.jsx)("span",{className:M.a["task-item-header-title"],children:o}),Object(X.jsx)("span",{className:M.a["task-item-header-action"],children:Object(X.jsx)(O.a,{onClick:function(){return t.openCollection(n)}})})]}),Object(X.jsx)("div",{className:M.a["task-item-body"],children:Object(X.jsx)(G.ReactSortable,{id:n,group:"tasks",list:t.state[n],setList:function(e){return t.setList(n,e)},onEnd:function(e){return t.updateChangeTask(n,e)},children:t.state[n].map((function(e){return Object(X.jsxs)("div",{className:M.a["task-item-wrap"],children:[Object(X.jsx)("div",{className:M.a["task-item-title"],children:e.name}),Object(X.jsx)("div",{className:M.a["task-item-heart"],children:Array.from(Array(e.tomato),(function(t,e){return Object(X.jsx)(_.a,{className:"m-l-8",twoToneColor:"#eb2f96"},e)}))}),Object(X.jsxs)("div",{className:M.a["task-item-actions"],children:[Object(X.jsx)(B.a,{className:"m-r-12",onClick:function(){t.editTask(e)}}),Object(X.jsx)(w.a,{className:"m-r-12",onClick:function(){t.removeTask(e)}}),Object(X.jsx)(z.a,{onClick:function(){t.startTomato(e)}})]})]},e._id)}))})})]},"".concat(n,"-wrap"))})),Object(X.jsx)(a.a,{title:U.a.t("action.create"),visible:n,width:W.b.md,destroyOnClose:!0,footer:!1,onCancel:function(){return t.closeCollection()},children:Object(X.jsxs)(r.a,{labelCol:{span:24},wrapperCol:{span:24},onFinish:function(e){return t.onFinish(e)},initialValues:{name:A?A.name:"",group:i},children:[Object(X.jsx)(r.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u4efb\u52a1\u540d\u79f0"}],children:Object(X.jsx)(l.a,{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"})}),Object(X.jsx)(r.a.Item,{name:"group",label:"\u5206\u7ec4",rules:[{required:!0}],children:Object(X.jsx)(g.a,{placeholder:"\u9009\u62e9\u5206\u7ec4",onChange:this.changeGroup,allowClear:!0,children:this.groups.map((function(t){var e=t.key,n=t.name;return Object(X.jsx)(L,{value:e,children:n},e)}))})}),Object(X.jsxs)(r.a.Item,{children:[Object(X.jsx)(s.a,{type:"primary",htmlType:"submit",className:"m-r-12",children:U.a.t("action.save")}),Object(X.jsxs)(s.a,{onClick:function(){return t.closeCollection()},children:[" ",U.a.t("action.cancel")]})]})]})}),Object(X.jsx)(a.a,{visible:o,width:W.b.md,destroyOnClose:!0,title:!1,footer:!1,closable:!1,children:Object(X.jsxs)("div",{className:M.a["tomato-wrap"],children:[Object(X.jsx)("div",{className:M.a["tomato-title"],children:c}),Object(X.jsx)("div",{className:M.a["tomato-clock"],children:Object(X.jsx)(S.a,{seconds:d,color:"#14a3b3",alpha:.9,size:300,onComplete:function(){return t.countCompleted()}})}),Object(X.jsxs)("div",{className:M.a["tomato-actions"],children:[Object(X.jsx)(s.a,{type:"primary",onClick:function(){t.taskOk()},children:"\u5b8c\u6210\u4efb\u52a1"}),Object(X.jsx)(s.a,{className:"m-l-12 m-r-12",onClick:function(){t.taskRestart()},children:"\u91cd\u65b0\u5f00\u59cb"}),Object(X.jsx)(s.a,{onClick:function(){t.taskStop()},children:"\u505c\u6b62"})]})]})})]})]})}}]),n}(J.Component)}}]);
//# sourceMappingURL=8.1fd70f74.chunk.js.map