{"version":3,"sources":["views/project/ProjectCollection.tsx","../node_modules/@ant-design/icons-svg/es/asn/SnippetsOutlined.js","../node_modules/@ant-design/icons/es/icons/SnippetsOutlined.js","views/project/index.tsx","apis/tasks.ts","apis/project.ts","apis/scrum.ts","apis/index.ts","components/Mixin/index.tsx"],"names":["ProjectCollecrtionComponent","props","state","loading","e","preventDefault","this","callback","isVisible","isRefresh","values","rule","value","isPhone","entity","labelCol","span","wrapperCol","onFinish","handleSubmit","bind","initialValues","name","description","Item","label","rules","required","message","placeholder","rows","type","htmlType","className","i18n","t","onClick","cancel","Component","SnippetsOutlined","ref","React","AntdIcon","Object","assign","icon","SnippetsOutlinedSvg","displayName","UserView","fetchAction","getProjects","getDetailAction","getProjectDetail","createAction","createProject","updateAction","updateProject","deleteAction","deleteProject","record","editEntity","_id","deleteEntity","history","push","data","pagination","getRowKey","columns","title","dataIndex","key","render","text","width","placement","detailAction","EditOutlined","editAction","DeleteOutlined","rowKey","bordered","dataSource","searchAction","isCollectionVisible","openCollection","closeCollection","collectionCallBack","onKeyDown","suffix","SearchOutlined","PlusOutlined","getTable","visible","MODAL_SIZE","md","destroyOnClose","footer","onCancel","listMixin","createTask","request","url","method","updateTask","deleteTask","getTaskDetail","params","getTasks","sortTasks","summaryTask","getSummary","id","getProjectScrums","createScrum","ComposedComponent","instance","beforeFetch","afterFtech","searchText","showSizeChanger","onShowSizeChange","onChange","pageChange","pageSizeOptions","hideOnSinglePage","pageIndex","pageSize","total","getList","code","keyCode","target","current","page","setState","then","init","pi","ps","keyword","res","err","console","log","error","index","getInstance"],"mappings":"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","file":"static/js/483.3399d139.chunk.js","sourcesContent":["/*\n * @Author: D.Y\n * @Date: 2021-02-04 15:27:20\n * @LastEditTime: 2021-04-20 16:05:37\n * @LastEditors: D.Y\n * @FilePath: /arthemis-client/src/views/project/ProjectCollection.tsx\n * @Description:\n */\nimport React, { Component } from 'react'\nimport { Form, Input, Button } from 'antd'\nimport i18n from 'i18next'\nimport { isPhone } from '@utils/index'\nimport type { IProject } from '@interfaces/project'\nimport TextArea from 'antd/lib/input/TextArea'\n\ntype IProjectCollectionProps = {\n  callback: ({ isVisible, isRefresh, values }) => unknown\n  form: any\n  entity: IProject\n}\ntype IProjectCollectionState = {\n  loading: boolean\n}\n\nexport default class ProjectCollecrtionComponent extends Component<\n  IProjectCollectionProps,\n  IProjectCollectionState\n> {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: false,\n    }\n  }\n  componentDidMount() {\n    // console.log(this.props.entity);\n  }\n  cancel(e) {\n    e.preventDefault()\n    this.props.callback({\n      isVisible: false,\n      isRefresh: false,\n      values: '',\n    })\n  }\n  handleSubmit(values) {\n    this.props.callback({\n      isVisible: false,\n      isRefresh: true,\n      values,\n    })\n  }\n  checkPhone(rule, value, callback) {\n    isPhone(value) ? callback() : callback('请输入正确的手机号码')\n  }\n  render() {\n    const { entity } = this.props\n    return (\n      <Form\n        labelCol={{ span: 24 }}\n        wrapperCol={{ span: 24 }}\n        onFinish={this.handleSubmit.bind(this)}\n        initialValues={{\n          name: entity ? entity.name : '',\n          description: entity ? entity.description : '',\n        }}\n      >\n        <Form.Item\n          label=\"用户名\"\n          name=\"name\"\n          rules={[{ required: true, message: '请输入项目名' }]}\n        >\n          <Input placeholder=\"请输入用户名\" />\n        </Form.Item>\n        <Form.Item label=\"描述\" name=\"description\" rules={[{ required: true, message: '请输入描述' }]}>\n          <TextArea rows={4} placeholder=\"请输入描述\"/>\n        </Form.Item>\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" className=\"m-r-12\">\n            {i18n.t('action.save')}\n          </Button>\n          <Button onClick={this.cancel.bind(this)}> {i18n.t('action.cancel')}</Button>\n        </Form.Item>\n      </Form>\n    )\n  }\n}\n","// This icon file is generated automatically.\nvar SnippetsOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M832 112H724V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H500V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H320c-17.7 0-32 14.3-32 32v120h-96c-17.7 0-32 14.3-32 32v632c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32v-96h96c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM664 888H232V336h218v174c0 22.1 17.9 40 40 40h174v338zm0-402H514V336h.2L664 485.8v.2zm128 274h-56V456L544 264H360v-80h68v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h152v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h68v576z\" } }] }, \"name\": \"snippets\", \"theme\": \"outlined\" };\nexport default SnippetsOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport SnippetsOutlinedSvg from \"@ant-design/icons-svg/es/asn/SnippetsOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar SnippetsOutlined = function SnippetsOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: SnippetsOutlinedSvg\n  }));\n};\n\nSnippetsOutlined.displayName = 'SnippetsOutlined';\nexport default /*#__PURE__*/React.forwardRef(SnippetsOutlined);","import React, { Component, Fragment } from 'react'\nimport { Table, Input, Button, Tooltip, Modal } from 'antd'\n\nimport { ContentLayoutComponent } from '@components/index'\nimport { MODAL_SIZE } from '@constants/index'\nimport ProjectCollecrtionComponent from './ProjectCollection'\nimport { listMixin } from '@components/Mixin'\nimport {\n  getProjects,\n  createProject,\n  updateProject,\n  getProjectDetail,\n  deleteProject,\n} from '@apis/index'\nimport type { IListMixin } from '@interfaces/mixin'\nimport {\n  SettingOutlined,\n  EditOutlined,\n  DeleteOutlined,\n  SearchOutlined,\n  PlusOutlined,\n  SnippetsOutlined,\n} from '@ant-design/icons'\nimport i18n from 'i18next'\n\nclass UserView extends Component<IListMixin, any> {\n  init() {\n    return {\n      fetchAction: getProjects,\n      getDetailAction: getProjectDetail,\n      createAction: createProject,\n      updateAction: updateProject,\n      deleteAction: deleteProject,\n    }\n  }\n\n  editAction(record) {\n    this.props.editEntity(record._id)\n  }\n\n  deleteAction(record) {\n    this.props.deleteEntity(record._id)\n  }\n\n  detailAction(record){\n    // @ts-ignore\n    const { history } = this.props\n    history.push(`/projects/${record._id}`)\n  }\n\n  getTable() {\n    const { data, loading, pagination, getRowKey } = this.props\n    const columns = [\n      {\n        title: i18n.t('list.name'),\n        dataIndex: 'name',\n        key: 'name',\n        render: (text) => text,\n      },\n      {\n        title: i18n.t('list.description'),\n        dataIndex: 'description',\n        key: 'description',\n      },\n      //   {\n      //     title: i18n.t('list.address'),\n      //     dataIndex: 'address',\n      //     key: 'address',\n      //   },\n      {\n        title: i18n.t('list.operation'),\n        key: 'action',\n        width: 200,\n        render: (text, record) => (\n          <span>\n            {/* <span className=\"m-l-12 m-r-12 icon-action\">\n              <SettingOutlined /> {i18n.t('action.setting')}\n            </span> */}\n            <span className=\"m-l-12 m-r-12 icon-action\">\n              <Tooltip placement=\"top\" title={i18n.t('action.edit')}>\n                <SnippetsOutlined onClick={this.detailAction.bind(this, record)} />\n              </Tooltip>\n            </span>\n            <span className=\"m-l-12 m-r-12 icon-action\">\n              <Tooltip placement=\"top\" title={i18n.t('action.edit')}>\n                <EditOutlined onClick={this.editAction.bind(this, record)} />\n              </Tooltip>\n            </span>\n            <span className=\"m-l-12 m-r-12 icon-action\">\n              <Tooltip placement=\"top\" title={i18n.t('action.delete')}>\n                <DeleteOutlined onClick={this.deleteAction.bind(this, record)} />\n              </Tooltip>\n            </span>\n          </span>\n        ),\n      },\n    ]\n\n    return (\n      <Table\n        rowKey={getRowKey}\n        pagination={pagination}\n        loading={loading}\n        bordered={true}\n        columns={columns}\n        dataSource={data}\n      />\n    )\n  }\n\n  render() {\n    const {\n      searchAction,\n      isCollectionVisible,\n      openCollection,\n      closeCollection,\n      collectionCallBack,\n      entity,\n    } = this.props\n    return (\n      <ContentLayoutComponent>\n        <Fragment key=\"left\">\n          <Input\n            className=\"search\"\n            onKeyDown={searchAction}\n            suffix={<SearchOutlined />}\n            placeholder={i18n.t('list.search')}\n          />\n        </Fragment>\n        <Fragment key=\"actions\">\n          <Button\n            type=\"primary\"\n            icon={<PlusOutlined />}\n            className={`${'action-btn'}`}\n            onClick={openCollection}\n          >\n            {i18n.t('action.create')}\n          </Button>\n        </Fragment>\n        <Fragment key=\"main\">\n          {this.getTable()}\n          <Modal\n            title={i18n.t('action.create')}\n            visible={isCollectionVisible}\n            width={MODAL_SIZE.md}\n            destroyOnClose={true}\n            footer={false}\n            onCancel={closeCollection}\n          >\n            {\n              // @ts-ignore\n              <ProjectCollecrtionComponent entity={entity} callback={collectionCallBack} />\n            }\n          </Modal>\n        </Fragment>\n      </ContentLayoutComponent>\n    )\n  }\n}\n\nexport default listMixin(UserView)\n","/*\n * @Author: D.Y\n * @Date: 2021-04-14 19:16:26\n * @LastEditTime: 2021-04-21 10:02:26\n * @LastEditors: D.Y\n * @FilePath: /arthemis-client/src/apis/tasks.ts\n * @Description:\n */\nimport type { Task } from '@interfaces/task'\nimport request from '@utils/request'\n\nexport const createTask = (data: Task) => {\n  return request({\n    url: '/tasks',\n    method: 'post',\n    data,\n  })\n}\n\nexport const updateTask = (_id: string, data: Task) => {\n  return request({\n    url: `/tasks/${_id}`,\n    method: 'put',\n    data,\n  })\n}\n\nexport const deleteTask = (_id: string) => {\n  return request({\n    url: `/tasks/${_id}`,\n    method: 'delete',\n  })\n}\n\nexport const getTaskDetail = (_id: string, params = {}) => {\n  return request({\n    url: `/tasks/${_id}`,\n    method: 'get',\n    params,\n  })\n}\n\nexport const getTasks = (params = {}) => {\n  return request({\n    url: '/tasks',\n    method: 'get',\n    params,\n  })\n}\n\nexport const sortTasks = (\n  _id: string,\n  data: {\n    fromId: string\n    toId: string\n    oldIndex: number\n    newIndex: number\n  },\n) => {\n  return request({\n    url: `/tasks/${_id}/sort`,\n    method: 'post',\n    data,\n  })\n}\n\nexport const summaryTask = (data: { content: string; dateNumber: string }) => {\n  return request({\n    url: '/task-summary',\n    method: 'post',\n    data,\n  })\n}\nexport const getSummary = (params = {}) => {\n  return request({\n    url: '/task-summary',\n    method: 'get',\n    params,\n  })\n}\n","/*\n * @Author: D.Y\n * @Date: 2021-02-04 15:27:20\n * @LastEditTime: 2021-04-20 15:54:24\n * @LastEditors: D.Y\n * @FilePath: /arthemis-client/src/apis/project.ts\n * @Description: \n */\n\nimport type { IProject } from '@interfaces/project'\nimport request from '@utils/request'\n\n\nexport const getProjects = (params = {}) => {\n  return request({\n    url: '/projects',\n    method: 'get',\n    params,\n  })\n}\n\nexport const createProject = (data: IProject) => {\n  return request({\n    url: '/projects',\n    method: 'post',\n    data,\n  })\n}\n\nexport const getProjectDetail = (id: string, params = {}) => {\n  return request({\n    url: `/projects/${id}`,\n    method: 'get',\n    params,\n  })\n}\n\nexport const updateProject = (id: string, data: IProject) => {\n  return request({\n    url: `/projects/${id}`,\n    method: 'put',\n    data,\n  })\n}\n\nexport const deleteProject = (id: string) => {\n  return request({\n    url: `/projects/${id}`,\n    method: 'delete',\n  })\n}\n","\n/*\n * @Author: D.Y\n * @Date: 2021-04-20 19:17:58\n * @LastEditTime: 2021-04-20 19:45:35\n * @LastEditors: D.Y\n * @FilePath: /arthemis-client/src/apis/scrum.ts\n * @Description: \n */\nimport type { IScrum } from '@interfaces/scrum'\nimport request from '@utils/request'\n\nexport const getProjectScrums = (params = {}) => {\n    return request({\n      url: '/scrums',\n      method: 'get',\n      params,\n    })\n  }\n\n  export const createScrum = (data: IScrum) => {\n    return request({\n      url: '/scrums',\n      method: 'post',\n      data,\n    })\n  }","/*\n * @Author: D.Y\n * @Date: 2021-02-04 18:55:58\n * @LastEditTime: 2021-04-20 19:18:06\n * @LastEditors: D.Y\n * @FilePath: /arthemis-client/src/apis/index.ts\n * @Description:\n */\nexport * from './tasks'\nexport * from './users'\nexport * from './project'\nexport * from './scrum'\n","import React, { Component } from 'react'\n\ntype IListState = {\n  data: Record<string, unknown>[]\n  loading: boolean\n  isCollectionVisible: boolean\n  entity: Record<string, unknown>\n}\nexport const listMixin = (ComposedComponent) =>\n  class extends Component<any, IListState> {\n    private instance = null\n    private fetchAction = null\n    private getDetailAction = null\n    private createAction = null\n    private updateAction = null\n    private deleteAction = null\n\n    private beforeFetch = null\n    private afterFtech = null\n    private searchText = ''\n    private pagination = {\n      showSizeChanger: true,\n      onShowSizeChange: this.onShowSizeChange.bind(this),\n      onChange: this.pageChange.bind(this),\n      pageSizeOptions: ['10', '20', '30', '40', '50', '60', '100'],\n      hideOnSinglePage: false,\n      pageIndex: 1,\n      pageSize: 20,\n      total: 0,\n    }\n    constructor(props) {\n      super(props)\n      this.state = {\n        data: [],\n        loading: false,\n        isCollectionVisible: false,\n        entity: null,\n      }\n    }\n\n    componentDidMount() {\n      this.beforeFetch()\n      this.getList()\n      this.afterFtech()\n    }\n\n    searchAction(e) {\n      const code = e.keyCode\n      const { value } = e.target\n      if (code === 13) {\n        this.searchText = value\n        this.pagination.pageIndex = 1\n        this.pagination.pageSize = 20\n        this.getList()\n      }\n    }\n\n    onShowSizeChange(current, pageSize) {\n      this.pagination.pageSize = pageSize\n      this.getList()\n    }\n\n    pageChange(page) {\n      this.pagination.pageIndex = page\n      this.getList()\n    }\n\n    openCollection() {\n      this.setState({\n        isCollectionVisible: true,\n      })\n    }\n\n    closeCollection() {\n      this.setState({\n        isCollectionVisible: false,\n      })\n    }\n\n    collectionCallBack({ isVisible, isRefresh, values = '' }) {\n      isVisible && this.openCollection()\n      !isVisible && this.closeCollection()\n      if (values) {\n        if (!this.state.entity) {\n          // 新建\n          this.createAction(values).then(() => {\n            this.pagination.pageIndex = 1\n            this.getList()\n          })\n        } else {\n          // 修改\n          this.updateAction(this.state.entity._id, values).then(() => {\n            this.pagination.pageIndex = 1\n            this.getList()\n          })\n        }\n      } else {\n        isRefresh && this.getList()\n      }\n    }\n\n    getInstance(instance) {\n      if (instance) {\n        this.instance = instance\n        const {\n          fetchAction = () => {},\n          getDetailAction = () => {},\n          createAction = () => {},\n          updateAction = () => {},\n          deleteAction = () => {},\n          beforeFetch = () => {},\n          afterFtech = () => {},\n        } = this.instance.init()\n        this.fetchAction = fetchAction\n        this.getDetailAction = getDetailAction\n        this.createAction = createAction\n        this.updateAction = updateAction\n        this.deleteAction = deleteAction\n        this.beforeFetch = beforeFetch\n        this.afterFtech = afterFtech\n      }\n    }\n\n    getList() {\n      this.setState({\n        loading: true,\n      })\n      this.fetchAction({\n        pi: this.pagination.pageIndex - 1,\n        ps: this.pagination.pageSize,\n        keyword: this.searchText,\n      }).then((res) => {\n        const { page, total, data } = res\n        this.pagination.total = total\n        this.pagination.pageIndex = page\n        this.setState({\n          loading: false,\n          data,\n        })\n      })\n    }\n\n    editEntity(id: string) {\n      this.getDetailAction(id).then(\n        (data) => {\n          this.setState({\n            entity: data,\n            isCollectionVisible: true,\n          })\n        },\n        (err) => {\n          console.log(err)\n        },\n      )\n    }\n\n    deleteEntity(id: string) {\n      this.deleteAction(id).then(\n        () => {\n          this.pagination.pageIndex = 1\n          this.getList()\n        },\n        (error) => {\n          console.log(error)\n        },\n      )\n    }\n\n    getRowKey(record, index) {\n      return record.id || record._id || index\n    }\n\n    render() {\n      const { loading, data, isCollectionVisible, entity } = this.state\n      return (\n        <ComposedComponent\n          loading={loading}\n          data={data}\n          entity={entity}\n          pagination={this.pagination}\n          isCollectionVisible={isCollectionVisible}\n          searchAction={this.searchAction.bind(this)}\n          openCollection={this.openCollection.bind(this)}\n          closeCollection={this.closeCollection.bind(this)}\n          getRowKey={this.getRowKey.bind(this)}\n          getList={this.getList.bind(this)}\n          collectionCallBack={this.collectionCallBack.bind(this)}\n          editEntity={this.editEntity.bind(this)}\n          deleteEntity={this.deleteEntity.bind(this)}\n          {...this.props}\n          ref={this.getInstance.bind(this)}\n        />\n      )\n    }\n  }\n"],"sourceRoot":""}