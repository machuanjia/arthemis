(this["webpackJsonparthmis-client"]=this["webpackJsonparthmis-client"]||[]).push([[958],{2310:function(t,e,n){"use strict";n.r(e);n(298);var i=n(190),a=n.n(i),c=(n(293),n(181)),o=n.n(c),r=(n(640),n(642)),s=n.n(r),u=(n(1232),n(1233)),l=n.n(u),d=(n(296),n(186)),h=n.n(d),f=n(30),p=n(31),b=n(33),g=n(32),j=n(0),m=(n(662),n(663)),v=n.n(m),O=n(24),y=n(3),k=function(t){Object(b.a)(n,t);var e=Object(g.a)(n);function n(t){var i;return Object(f.a)(this,n),(i=e.call(this,t)).state={loading:!1},i}return Object(p.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props.entity)}},{key:"cancel",value:function(t){t.preventDefault(),this.props.callback({isVisible:!1,isRefresh:!1})}},{key:"handleSubmit",value:function(t){this.props.callback({isVisible:!1,isRefresh:!0,values:t})}},{key:"render",value:function(){var t=this.props.entity;return Object(y.jsxs)(v.a,{labelCol:{span:24},wrapperCol:{span:24},onFinish:this.handleSubmit.bind(this),initialValues:{name:t?t.name:""},children:[Object(y.jsx)(v.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}],children:Object(y.jsx)(s.a,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"})}),Object(y.jsxs)(v.a.Item,{children:[Object(y.jsx)(o.a,{type:"primary",htmlType:"submit",className:"m-r-12",children:O.a.t("action.save")}),Object(y.jsxs)(o.a,{onClick:this.cancel.bind(this),children:[" ",O.a.t("action.cancel")]})]})]})}}]),n}(j.Component),C=n(664),x=n(588),A=n(2312),S=n(2277),w=n(2313),I=n(577),F=n(197),L=n(189),V=n(691),z=function(t){Object(b.a)(n,t);var e=Object(g.a)(n);function n(){return Object(f.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"init",value:function(){return{fetchAction:C.j,createAction:C.a,getDetailAction:C.i,updateAction:C.s,deleteAction:C.e}}},{key:"settingAction",value:function(t){this.props.history.push("/graphs/".concat(t._id))}},{key:"editAction",value:function(t){this.props.editEntity(t._id)}},{key:"deleteAction",value:function(t){this.props.deleteEntity(t._id)}},{key:"getTable",value:function(){var t=this,e=this.props,n=e.data,i=e.loading,a=e.pagination,c=e.getRowKey,o=[{title:O.a.t("list.name"),dataIndex:"name",key:"name",render:function(t){return t}},{title:O.a.t("list.operation"),key:"action",width:200,render:function(e,n){return Object(y.jsxs)("span",{children:[Object(y.jsxs)("span",{className:"m-l-12 m-r-12 icon-actions",onClick:t.settingAction.bind(t,n),children:[Object(y.jsx)(x.a,{})," ",O.a.t("action.setting")]}),Object(y.jsx)("span",{className:"m-l-12 m-r-12 icon-actions",children:Object(y.jsx)(h.a,{placement:"top",title:O.a.t("action.edit"),children:Object(y.jsx)(A.a,{onClick:t.editAction.bind(t,n)})})}),Object(y.jsx)("span",{className:"m-l-12 m-r-12 icon-actions",children:Object(y.jsx)(h.a,{placement:"top",title:O.a.t("action.delete"),children:Object(y.jsx)(S.a,{onClick:t.deleteAction.bind(t,n)})})})]})}}];return Object(y.jsx)(l.a,{rowKey:c,pagination:a,loading:i,bordered:!0,columns:o,dataSource:n})}},{key:"render",value:function(){var t=this.props,e=t.searchAction,n=t.isCollectionVisible,i=t.openCollection,c=t.closeCollection,r=t.collectionCallBack,u=t.entity;return Object(y.jsxs)(F.a,{children:[Object(y.jsx)(j.Fragment,{children:Object(y.jsx)(s.a,{className:"search",onKeyDown:e,suffix:Object(y.jsx)(w.a,{}),placeholder:O.a.t("list.search")})},"left"),Object(y.jsx)(j.Fragment,{children:Object(y.jsx)(o.a,{type:"primary",icon:Object(y.jsx)(I.a,{}),className:"action-btn",onClick:i,children:O.a.t("action.create")})},"actions"),Object(y.jsxs)(j.Fragment,{children:[this.getTable(),Object(y.jsx)(a.a,{title:O.a.t("action.create"),visible:n,width:L.b.md,destroyOnClose:!0,footer:!1,onCancel:c,children:Object(y.jsx)(k,{entity:u,callback:r})})]},"main")]})}}]),n}(j.Component);e.default=Object(V.a)(z)},621:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return o}));var i=n(56),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/scrums",method:"get",params:t})},c=function(t){return Object(i.a)({url:"/scrums",method:"post",data:t})},o=function(t,e){return Object(i.a)({url:"/scrums/".concat(t),method:"put",data:e})}},626:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"h",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return d}));var i=n(56),a=function(t){return Object(i.a)({url:"/tasks",method:"post",data:t})},c=function(t,e){return Object(i.a)({url:"/tasks/".concat(t),method:"put",data:e})},o=function(t){return Object(i.a)({url:"/tasks/".concat(t),method:"delete"})},r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)({url:"/tasks/".concat(t),method:"get",params:e})},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/tasks",method:"get",params:t})},u=function(t,e){return Object(i.a)({url:"/tasks/".concat(t,"/sort"),method:"post",data:e})},l=function(t){return Object(i.a)({url:"/task-summary",method:"post",data:t})},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/task-summary",method:"get",params:t})}},634:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"b",(function(){return s}));var i=n(56),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"/projects",method:"get",params:t})},c=function(t){return Object(i.a)({url:"/projects",method:"post",data:t})},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)({url:"/projects/".concat(t),method:"get",params:e})},r=function(t,e){return Object(i.a)({url:"/projects/".concat(t),method:"put",data:e})},s=function(t){return Object(i.a)({url:"/projects/".concat(t),method:"delete"})}},635:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"b",(function(){return s}));var i=n(56),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({url:"graphs",method:"get",params:t})},c=function(t){return Object(i.a)({url:"graphs",method:"post",data:t})},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)({url:"graphs/".concat(t),method:"get",params:e})},r=function(t,e){return Object(i.a)({url:"graphs/".concat(t),method:"put",data:e})},s=function(t){return Object(i.a)({url:"graphs/".concat(t),method:"delete"})}},664:function(t,e,n){"use strict";var i=n(626);n.d(e,"c",(function(){return i.a})),n.d(e,"g",(function(){return i.b})),n.d(e,"m",(function(){return i.c})),n.d(e,"n",(function(){return i.e})),n.d(e,"q",(function(){return i.f})),n.d(e,"r",(function(){return i.g})),n.d(e,"u",(function(){return i.h}));var a=n(87);n.d(e,"d",(function(){return a.a})),n.d(e,"h",(function(){return a.b})),n.d(e,"o",(function(){return a.c})),n.d(e,"p",(function(){return a.e})),n.d(e,"v",(function(){return a.g}));var c=n(634);n.d(e,"b",(function(){return c.a})),n.d(e,"f",(function(){return c.b})),n.d(e,"k",(function(){return c.c})),n.d(e,"l",(function(){return c.d})),n.d(e,"t",(function(){return c.e}));n(621);var o=n(635);n.d(e,"a",(function(){return o.a})),n.d(e,"e",(function(){return o.b})),n.d(e,"i",(function(){return o.c})),n.d(e,"j",(function(){return o.d})),n.d(e,"s",(function(){return o.e}))},691:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(18),a=n(30),c=n(31),o=n(192),r=n(33),s=n(32),u=n(0),l=n(3),d=function(t){return function(e){Object(r.a)(u,e);var n=Object(s.a)(u);function u(t){var e;return Object(a.a)(this,u),(e=n.call(this,t)).instance=null,e.fetchAction=null,e.getDetailAction=null,e.createAction=null,e.updateAction=null,e.deleteAction=null,e.beforeFetch=null,e.afterFtech=null,e.searchText="",e.pagination={showSizeChanger:!0,onShowSizeChange:e.onShowSizeChange.bind(Object(o.a)(e)),onChange:e.pageChange.bind(Object(o.a)(e)),pageSizeOptions:["10","20","30","40","50","60","100"],hideOnSinglePage:!1,pageIndex:1,pageSize:20,total:0},e.state={data:[],loading:!1,isCollectionVisible:!1,entity:null},e}return Object(c.a)(u,[{key:"componentDidMount",value:function(){this.beforeFetch(),this.getList(),this.afterFtech()}},{key:"searchAction",value:function(t){var e=t.keyCode,n=t.target.value;13===e&&(this.searchText=n,this.pagination.pageIndex=1,this.pagination.pageSize=20,this.getList())}},{key:"onShowSizeChange",value:function(t,e){this.pagination.pageSize=e,this.getList()}},{key:"pageChange",value:function(t){this.pagination.pageIndex=t,this.getList()}},{key:"openCollection",value:function(){this.setState({isCollectionVisible:!0})}},{key:"closeCollection",value:function(){this.setState({isCollectionVisible:!1})}},{key:"collectionCallBack",value:function(t){var e=this,n=t.isVisible,i=t.isRefresh,a=t.values,c=void 0===a?"":a;n&&this.openCollection(),!n&&this.closeCollection(),c?this.state.entity?this.updateAction(this.state.entity._id,c).then((function(){e.pagination.pageIndex=1,e.getList()})):this.createAction(c).then((function(){e.pagination.pageIndex=1,e.getList()})):i&&this.getList()}},{key:"getInstance",value:function(t){if(t){this.instance=t;var e=this.instance.init(),n=e.fetchAction,i=void 0===n?function(){}:n,a=e.getDetailAction,c=void 0===a?function(){}:a,o=e.createAction,r=void 0===o?function(){}:o,s=e.updateAction,u=void 0===s?function(){}:s,l=e.deleteAction,d=void 0===l?function(){}:l,h=e.beforeFetch,f=void 0===h?function(){}:h,p=e.afterFtech,b=void 0===p?function(){}:p;this.fetchAction=i,this.getDetailAction=c,this.createAction=r,this.updateAction=u,this.deleteAction=d,this.beforeFetch=f,this.afterFtech=b}}},{key:"getList",value:function(){var t=this;this.setState({loading:!0}),this.fetchAction({pi:this.pagination.pageIndex-1,ps:this.pagination.pageSize,keyword:this.searchText}).then((function(e){var n=e.page,i=e.total,a=e.data;t.pagination.total=i,t.pagination.pageIndex=n,t.setState({loading:!1,data:a})}))}},{key:"editEntity",value:function(t){var e=this;this.getDetailAction(t).then((function(t){e.setState({entity:t,isCollectionVisible:!0})}),(function(t){console.log(t)}))}},{key:"deleteEntity",value:function(t){var e=this;this.deleteAction(t).then((function(){e.pagination.pageIndex=1,e.getList()}),(function(t){console.log(t)}))}},{key:"getRowKey",value:function(t,e){return t.id||t._id||e}},{key:"render",value:function(){var e=this.state,n=e.loading,a=e.data,c=e.isCollectionVisible,o=e.entity;return Object(l.jsx)(t,Object(i.a)(Object(i.a)({loading:n,data:a,entity:o,pagination:this.pagination,isCollectionVisible:c,searchAction:this.searchAction.bind(this),openCollection:this.openCollection.bind(this),closeCollection:this.closeCollection.bind(this),getRowKey:this.getRowKey.bind(this),getList:this.getList.bind(this),collectionCallBack:this.collectionCallBack.bind(this),editEntity:this.editEntity.bind(this),deleteEntity:this.deleteEntity.bind(this)},this.props),{},{ref:this.getInstance.bind(this)}))}}]),u}(u.Component)}}}]);
//# sourceMappingURL=958.31a184e0.chunk.js.map